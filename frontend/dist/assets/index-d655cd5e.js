var Nt=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);import{r as d,a as At,u as ne,L as Z,b as As,N as kt,d as Tr,e as Js,R as Ct,f as ee,h as Mt,B as Dt}from"./vendor-86b923c5.js";import{c as Tt}from"./supabase-b5a349d0.js";var Sl=Nt((Pl,js)=>{(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}})();var Pr={exports:{}},ks={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pt=d,Ut=Symbol.for("react.element"),Et=Symbol.for("react.fragment"),Yt=Object.prototype.hasOwnProperty,Ot=Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,It={key:!0,ref:!0,__self:!0,__source:!0};function Ur(e,r,t){var i,a={},n=null,o=null;t!==void 0&&(n=""+t),r.key!==void 0&&(n=""+r.key),r.ref!==void 0&&(o=r.ref);for(i in r)Yt.call(r,i)&&!It.hasOwnProperty(i)&&(a[i]=r[i]);if(e&&e.defaultProps)for(i in r=e.defaultProps,r)a[i]===void 0&&(a[i]=r[i]);return{$$typeof:Ut,type:e,key:n,ref:o,props:a,_owner:Ot.current}}ks.Fragment=Et;ks.jsx=Ur;ks.jsxs=Ur;Pr.exports=ks;var s=Pr.exports,Vs={},Sr=At;Vs.createRoot=Sr.createRoot,Vs.hydrateRoot=Sr.hydrateRoot;const Rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAhCAYAAABN2CLhAAAAAXNSR0IArs4c6QAAARhJREFUWAntWNENgjAQpYYBdAM3EDZgA9lAnMC4ARs4AnWDuoEbqBt0BNjA9z5M+kNaI8WS3CWXUO64vr42uUdV0zRVlmUXeAFP2SzAGa31WQH0A4PUAbtkliuMNu6bBTwXBG0WANSFaBRHOCI8HrUbSfDZAhPPdJ8gNoEkDAgDwoAwsHQGKJi2WMQJzq74L+uVUqbrumsIAII2SNyHJM+QU6JNP33zUDBVvqQZ43XIXKmpPO6613JktHBuSdAqkRfDLIpSwRGHmDAgDAgDwoAwMD8Dn3sPdsPdBNP3qHFDZ7MT1BotkUPlaUQPoxnfB1p8EvWqjYJpas2xBhEV6kYzgr5HqB5V+BB0C+cfwwD/1V4ocIx93/YG6YM08g0WFTYAAAAASUVORK5CYII=",Xs="/assets/screenmerch_logo.png-13fa081f.png",Ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAYCAYAAAARfGZ1AAAAAXNSR0IArs4c6QAAAh5JREFUSA2tlDFP60AMx0m6doCJkZGxfRIDEwoDAxNlKSuv6ohE+QCIdGOEiaGVyjcARrYgsTd8kac3MLf8fLWPS0hRW9WSY5/v778dXy7RxhwZjUYtthpogjZRkRzNptNp3ul0Xlzkl0dU3oNUiEaoEZYhtpZCfxGxlRKHUYhT1mO0SXcf2D56iG6pit/XPSk+JucGWym+cyU24D0d9SozCILdxKToJSpyBf5u5n4/HTlg14WGTwE+f0Pme+S12H1SxJ/yiNxYeM1HBUjHCxELXrH3mivnVJBYqkdR1JA5Au4VdhdbpHYG+iY+SzpvyooCC3fss3Fo6H+Q67hsP6ZqoovMgitYlxtwOQrfOat8BVJLcbkyXguILXzn4cYqPp37T9vIrePCvJYkt1zjcukxr5IpUaJ2FeNyAy7HIWOxaid8SpvLMmvOieYZ14xcLoJ9p0RSBS1jJMf9i/RS+Vx3oLzOuUYuyxfBIyscxbr/S8Dhkf50AaZE7cd1h9+XC+KRgaOjEGxPw1dgJacgnlyipQI5IRlZRlfy+93Ab+AnuC20iYrcEt+bTCZn3W733yw0exbIJUQBmd8jJIULESaJD+ZDR/HAcp/1uF6vH7Tb7U/D/iC3DYq47khKiFmXOYQZ69wObzgc7sRx/EZ8B+w7BY6twFxyCBYWLfBKgd2wwFrIpYvBYLBdq9XkDVwB7NHayCsKXK+VPChwwezTL5f411qp3J6CAAAAAElFTkSuQmCC",_r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAidJREFUaAXtmN1NwzAQx++SSuWNVPAOGxBASOWJbAAjdISyAWzABu0mLU8UISAjtO9IgQFic1fJUWi+HLBaB9kPdXK+2P79a+cuBnDFKeAUcAo4BZwCToH/owAqlCQMg7TvTxBkBIiBsm+zlgBzP01vBy9x3HZcTz1AEFNEuNkVBM+DVI2E581YVDWvqpp9kmF4rNozEIK4Vsad1rwa9iCsmwNDiL4/I59j5ZeBKIPtdQaBP2E7BVIFweL3TPwDB4vX7KWh+vsYns0R8Erd/7Wug+C+O/GPNEF0AkQHwnoQXQirQdpAMIiRzc4dmSyp8APsw4wiZG08yY9pJQiinLTNMDRB5IryoGVegaZrlBBL+ikrZA5ooidlbWvbL3I9TRCYHi7e7ioHLmk4eH4bl5jXJsqRIgE+pxjGSifiiA6tA9FRaZs+unvkKLk8rcybBk/vj5uTTi7CEHq4v2nneyG8E/74MFk0QXAkJI5qBi5MK/W9B5QVSWPBu6ZnzSY794iUtyDhS5Nh7WYliIci9kQatYGxEoQl5gOINjDWgrSFsRqkDYz1ILowmq9f7q66fAzPC3kTSmk0VvCeodhE517+nGJQIT4ZAaGwEBUw6aDMdKmD6cTSygtS9TbLgchV/oEdXy/rxs9gUvhUftnSkgLHtBqmZetPOW+nlveDRbxsGoth8j4/FjJ/8Dedu+YfNn5NCm9O0PgYrkOngFPAKeAUcAr8ZwW+ASU7qyTOpG88AAAAAElFTkSuQmCC",Lt={development:{API_BASE_URL:"http://127.0.0.1:5000",EMAIL_API_URL:"http://localhost:3001",SUBSCRIPTION_API_URL:"http://localhost:3002",SUPABASE_URL:"https://sojxbydpcdcdzfdtbypd.supabase.co",SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvanhieWRwY2RjZHpmZHRieXBkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NTIwNTUsImV4cCI6MjA2NTQyODA1NX0.BUm9LKbNs-EdJKxwwtoY3IRyokmDtRbS0XP-WBw-5no"},production:{API_BASE_URL:"https://backend-hidden-firefly-7865.fly.dev",EMAIL_API_URL:"https://backend-hidden-firefly-7865.fly.dev",SUBSCRIPTION_API_URL:"https://backend-hidden-firefly-7865.fly.dev",SUPABASE_URL:"https://sojxbydpcdcdzfdtbypd.supabase.co",SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvanhieWRwY2RjZHpmZHRieXBkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NTIwNTUsImV4cCI6MjA2NTQyODA1NX0.BUm9LKbNs-EdJKxwwtoY3IRyokmDtRbS0XP-WBw-5no"}},Se=Lt.production,Ze={BASE_URL:Se.API_BASE_URL,EMAIL_API_URL:Se.EMAIL_API_URL,SUBSCRIPTION_API_URL:Se.SUBSCRIPTION_API_URL,SUPABASE_URL:Se.SUPABASE_URL,SUPABASE_ANON_KEY:Se.SUPABASE_ANON_KEY,ENDPOINTS:{CREATE_PRODUCT:`${Se.API_BASE_URL}/api/create-product`,SEND_SUBSCRIPTION_EMAIL:`${Se.EMAIL_API_URL}/api/send-subscription-email`,VERIFY_SUBSCRIPTION:`${Se.SUBSCRIPTION_API_URL}/api/verify-subscription`,USER_SUBSCRIPTION:`${Se.SUBSCRIPTION_API_URL}/api/users`}},Wt=({isOpen:e,onClose:r})=>{const[t,i]=d.useState(""),[a,n]=d.useState(!1),[o,l]=d.useState(""),[h,p]=d.useState(""),g=async b=>{if(b.preventDefault(),!t){l("Please enter a valid email address"),p("error");return}n(!0),l("");try{const x=await fetch(Ze.ENDPOINTS.SEND_SUBSCRIPTION_EMAIL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),_=await x.json();if(x.ok)l(`Subscription email sent to ${t}! Please check your inbox for approval link.`),p("success"),i(""),setTimeout(()=>{r(),l("")},3e3);else throw new Error(_.error||"Failed to send email")}catch(x){console.error("Error:",x),x.message.includes("fetch")?l("Backend server is not running. Please start the backend server first."):l(`Failed to send email: ${x.message}`),p("error")}finally{n(!1)}};return e?s.jsx("div",{className:"modal-overlay",onClick:r,children:s.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Subscribe to ScreenMerch"}),s.jsx("button",{className:"close-btn",onClick:r,children:"×"})]}),s.jsxs("div",{className:"modal-body",children:[s.jsx("p",{children:"Enter your email to receive a subscription approval link:"}),s.jsxs("form",{onSubmit:g,children:[s.jsx("div",{className:"email-input-group",children:s.jsx("input",{type:"email",value:t,onChange:b=>i(b.target.value),placeholder:"Enter your email address",required:!0,disabled:a})}),o&&s.jsx("div",{className:`message ${h}`,children:o}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{type:"button",className:"cancel-btn",onClick:r,disabled:a,children:"Cancel"}),s.jsx("button",{type:"submit",className:"subscribe-modal-btn",disabled:a,children:a?"Sending...":"Send Approval Link"})]})]})]})]})}):null},Bt=Ze.SUPABASE_URL,Vt=Ze.SUPABASE_ANON_KEY,f=Tt(Bt,Vt);console.log("VITE ENV:",{VITE_API_BASE_URL:"https://screenmerch.onrender.com",VITE_SUPABASE_URL:"https://sojxbydpcdcdzfdtbypd.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvanhieWRwY2RjZHpmZHRieXBkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NTIwNTUsImV4cCI6MjA2NTQyODA1NX0.BUm9LKbNs-EdJKxwwtoY3IRyokmDtRbS0XP-WBw-5no",VITE_API_URL:"https://screenmerch.onrender.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1});class Ht{static async getCurrentUserProfile(){try{const{data:{user:r}}=await f.auth.getUser();if(!r)return null;const{data:t,error:i}=await f.from("users").select("*").eq("id",r.id).single();return i?(console.error("Error fetching user profile:",i),null):t}catch(r){return console.error("Error in getCurrentUserProfile:",r),null}}static async upsertUserProfile(r){try{const{data:{user:t}}=await f.auth.getUser();if(!t)throw new Error("No authenticated user");const i={id:t.id,email:t.email,...r,updated_at:new Date().toISOString()},{data:a,error:n}=await f.from("users").upsert(i,{onConflict:"id",ignoreDuplicates:!1}).select().single();return n?(console.error("Error upserting user profile:",n),null):a}catch(t){return console.error("Error in upsertUserProfile:",t),null}}static async updateUserProfile(r){try{const{data:{user:t}}=await f.auth.getUser();if(!t)throw new Error("No authenticated user");const{data:i,error:a}=await f.from("users").update(r).eq("id",t.id).select().single();return a?(console.error("Error updating user profile:",a),null):i}catch(t){return console.error("Error in updateUserProfile:",t),null}}static async getUserProfileById(r){try{const{data:t,error:i}=await f.from("users").select("id, display_name, profile_image_url, cover_image_url, bio, created_at").eq("id",r).single();return i?(console.error("Error fetching user profile by ID:",i),null):t}catch(t){return console.error("Error in getUserProfileById:",t),null}}static async uploadProfileImage(r,t="profile-images"){try{const{data:{user:i}}=await f.auth.getUser();if(!i)throw new Error("No authenticated user");const a=r.name.split(".").pop(),n=`${i.id}-${Date.now()}.${a}`,o=`${t}/${n}`,{data:l,error:h}=await f.storage.from("profile-images").upload(o,r);if(h)return console.error("Error uploading profile image:",h),null;const{data:{publicUrl:p}}=f.storage.from("profile-images").getPublicUrl(o);return p}catch(i){return console.error("Error in uploadProfileImage:",i),null}}static async deleteProfileImage(r){try{const t=r.split("/"),a=`profile-images/${t[t.length-1]}`,{error:n}=await f.storage.from("profile-images").remove([a]);return n?(console.error("Error deleting profile image:",n),!1):!0}catch(t){return console.error("Error in deleteProfileImage:",t),!1}}static async deleteUserAccount(){try{const{data:{user:r}}=await f.auth.getUser();if(!r)return{success:!1,error:"No authenticated user found"};const t=await fetch(`http://localhost:3002/api/users/${r.id}/delete-account`,{method:"DELETE",headers:{"Content-Type":"application/json"}});return t.ok?await t.json():{success:!1,error:(await t.json()).error||"Failed to delete account"}}catch(r){return console.error("Error in deleteUserAccount:",r),{success:!1,error:r.message}}}}const{getCurrentUserProfile:kl,upsertUserProfile:Gt,updateUserProfile:Cl,getUserProfileById:Ml,uploadProfileImage:Dl,deleteProfileImage:Tl,deleteUserAccount:qt}=Ht,$t=({setSidebar:e,resetCategory:r})=>{var C,j,w;const[t,i]=d.useState(!1),[a,n]=d.useState(null),[o,l]=d.useState(!0),[h,p]=d.useState(!1),g=ne();d.useEffect(()=>{const c=async()=>{var D,R,W;const{data:{user:F}}=await f.auth.getUser();if(n(F),l(!1),F){const ce={id:F.id,username:((R=(D=F.user_metadata)==null?void 0:D.name)==null?void 0:R.replace(/\s+/g,"").toLowerCase())||F.email,display_name:((W=F.user_metadata)==null?void 0:W.name)||F.email,email:F.email};console.log("Upserting user profile with:",ce);const V=await Gt(ce);console.log("Upsert result:",V)}};c();const{data:{subscription:N}}=f.auth.onAuthStateChange(()=>{c()});return()=>N.unsubscribe()},[]),d.useEffect(()=>{const c=N=>{h&&!N.target.closest(".user-profile-container")&&p(!1)};return document.addEventListener("click",c),()=>document.removeEventListener("click",c)},[h]);const b=async()=>{const{error:c}=await f.auth.signInWithOAuth({provider:"google",options:{queryParams:{prompt:"select_account"}}});c&&alert("Login failed: "+c.message)},x=async()=>{await f.auth.signOut(),n(null),g("/")},_=async()=>{if(window.confirm("Are you sure you want to delete your account? This action cannot be undone."))try{const c=await qt();c.success?(await f.auth.signOut(),n(null),g("/"),alert("Your account has been successfully deleted."),window.location.reload()):alert(`Failed to delete account: ${c.error||"Unknown error"}`)}catch(c){console.error("Error deleting account:",c),alert("There was an error deleting your account. Please try again or contact support.")}},P=()=>{g("/subscription-tiers")},M=()=>{i(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs("nav",{className:"flex-div",children:[s.jsxs("div",{className:"nav-left flex-div",children:[s.jsx("img",{src:Rt,alt:"",className:"menu-icon",onClick:()=>e(c=>!c)}),s.jsxs(Z,{to:"/",onClick:r,children:[" ",s.jsx("img",{src:Xs,alt:"",className:"logo"})]})]}),s.jsx("div",{className:"nav-middle flex-div",children:s.jsxs("div",{className:"search-box flex-div",children:[s.jsx("input",{type:"text",placeholder:"Search"}),s.jsx("img",{src:Ft,alt:""})]})}),s.jsxs("div",{className:"nav-right flex-div",children:[a?s.jsx(Z,{to:"/upload",children:s.jsx("img",{src:_r,alt:"Upload"})}):s.jsx("img",{src:_r,alt:"Upload",style:{cursor:"pointer"},onClick:b,title:"Sign in to upload videos"}),s.jsx(Z,{to:"/privacy-policy",className:"privacy-link",title:"Privacy Policy",children:"🔒"}),s.jsx("button",{className:"subscribe-btn",onClick:P,children:"Subscribe"}),o?s.jsx("div",{className:"loading-spinner-navbar"}):a?s.jsxs("div",{className:"user-profile-container",children:[s.jsx("img",{className:"user-profile",src:((C=a==null?void 0:a.user_metadata)==null?void 0:C.picture)||"/default-avatar.jpg",alt:((j=a==null?void 0:a.user_metadata)==null?void 0:j.name)||"User",onClick:()=>p(!h)}),s.jsxs("div",{className:`user-dropdown ${h?"open":""}`,children:[s.jsxs("p",{children:["Signed in as ",s.jsx("strong",{children:(w=a==null?void 0:a.user_metadata)==null?void 0:w.name})]}),s.jsx("hr",{}),s.jsx(Z,{to:"/dashboard",className:"dropdown-item",onClick:()=>p(!1),children:"Dashboard"}),s.jsx(Z,{to:"/admin",className:"dropdown-item",onClick:()=>p(!1),children:"Admin Portal"}),s.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),p(!1),_()},className:"dropdown-item delete-account-btn",children:"Delete Account"}),s.jsx("button",{onClick:()=>{p(!1),x()},children:"Logout"})]})]}):s.jsx("button",{className:"sign-in-btn",onClick:b,children:"Sign In"})]})]}),s.jsx(Wt,{isOpen:t,onClose:M})]})},Qt=()=>s.jsx("footer",{className:"site-footer",children:s.jsxs("div",{className:"footer-container",children:[s.jsxs("div",{className:"footer-content",children:[s.jsxs("div",{className:"footer-section",children:[s.jsx("img",{src:"/src/assets/logo.png",alt:"ScreenMerch",className:"footer-logo"}),s.jsx("p",{className:"footer-description",children:"Create custom merchandise from your favorite video moments"})]}),s.jsxs("div",{className:"footer-section",children:[s.jsx("h4",{children:"Legal"}),s.jsxs("ul",{children:[s.jsx("li",{children:s.jsx(Z,{to:"/privacy-policy",children:"Privacy Policy"})}),s.jsx("li",{children:s.jsx(Z,{to:"/terms-of-service",children:"Terms of Service"})})]})]}),s.jsxs("div",{className:"footer-section",children:[s.jsx("h4",{children:"Support"}),s.jsxs("ul",{children:[s.jsx("li",{children:s.jsx("a",{href:"mailto:support@screenmerch.com",children:"Contact Us"})}),s.jsx("li",{children:s.jsx(Z,{to:"/subscription-tiers",children:"Subscription Plans"})})]})]}),s.jsxs("div",{className:"footer-section",children:[s.jsx("h4",{children:"SMS Notifications"}),s.jsxs("ul",{children:[s.jsx("li",{children:s.jsx(Z,{to:"/privacy-policy",children:"SMS Policy"})}),s.jsx("li",{children:s.jsx("span",{className:"sms-info",children:"Text STOP to opt-out"})}),s.jsx("li",{children:s.jsx("span",{className:"sms-info",children:"Text HELP for support"})})]})]})]}),s.jsxs("div",{className:"footer-bottom",children:[s.jsx("p",{children:"© 2025 ScreenMerch. All rights reserved."}),s.jsx("p",{className:"sms-disclosure",children:"Message and data rates may apply. Frequency varies."})]})]})}),zt=e=>e>=1e6?Math.floor(e/1e6)+"M":e>=1e3?Math.floor(e/1e3)+"K":e;//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Er;function v(){return Er.apply(null,arguments)}function Zt(e){Er=e}function me(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Fe(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Y(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function Ks(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var r;for(r in e)if(Y(e,r))return!1;return!0}function se(e){return e===void 0}function Me(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function ls(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Yr(e,r){var t=[],i,a=e.length;for(i=0;i<a;++i)t.push(r(e[i],i));return t}function Ee(e,r){for(var t in r)Y(r,t)&&(e[t]=r[t]);return Y(r,"toString")&&(e.toString=r.toString),Y(r,"valueOf")&&(e.valueOf=r.valueOf),e}function ye(e,r,t,i){return it(e,r,t,i,!0).utc()}function Jt(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function A(e){return e._pf==null&&(e._pf=Jt()),e._pf}var Hs;Array.prototype.some?Hs=Array.prototype.some:Hs=function(e){var r=Object(this),t=r.length>>>0,i;for(i=0;i<t;i++)if(i in r&&e.call(this,r[i],i,r))return!0;return!1};function er(e){var r=null,t=!1,i=e._d&&!isNaN(e._d.getTime());if(i&&(r=A(e),t=Hs.call(r.parsedDateParts,function(a){return a!=null}),i=r.overflow<0&&!r.empty&&!r.invalidEra&&!r.invalidMonth&&!r.invalidWeekday&&!r.weekdayMismatch&&!r.nullInput&&!r.invalidFormat&&!r.userInvalidated&&(!r.meridiem||r.meridiem&&t),e._strict&&(i=i&&r.charsLeftOver===0&&r.unusedTokens.length===0&&r.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=i;else return i;return e._isValid}function Cs(e){var r=ye(NaN);return e!=null?Ee(A(r),e):A(r).userInvalidated=!0,r}var wr=v.momentProperties=[],Fs=!1;function sr(e,r){var t,i,a,n=wr.length;if(se(r._isAMomentObject)||(e._isAMomentObject=r._isAMomentObject),se(r._i)||(e._i=r._i),se(r._f)||(e._f=r._f),se(r._l)||(e._l=r._l),se(r._strict)||(e._strict=r._strict),se(r._tzm)||(e._tzm=r._tzm),se(r._isUTC)||(e._isUTC=r._isUTC),se(r._offset)||(e._offset=r._offset),se(r._pf)||(e._pf=A(r)),se(r._locale)||(e._locale=r._locale),n>0)for(t=0;t<n;t++)i=wr[t],a=r[i],se(a)||(e[i]=a);return e}function cs(e){sr(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Fs===!1&&(Fs=!0,v.updateOffset(this),Fs=!1)}function fe(e){return e instanceof cs||e!=null&&e._isAMomentObject!=null}function Or(e){v.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function oe(e,r){var t=!0;return Ee(function(){if(v.deprecationHandler!=null&&v.deprecationHandler(null,e),t){var i=[],a,n,o,l=arguments.length;for(n=0;n<l;n++){if(a="",typeof arguments[n]=="object"){a+=`
[`+n+"] ";for(o in arguments[0])Y(arguments[0],o)&&(a+=o+": "+arguments[0][o]+", ");a=a.slice(0,-2)}else a=arguments[n];i.push(a)}Or(e+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return r.apply(this,arguments)},r)}var Nr={};function Ir(e,r){v.deprecationHandler!=null&&v.deprecationHandler(e,r),Nr[e]||(Or(r),Nr[e]=!0)}v.suppressDeprecationWarnings=!1;v.deprecationHandler=null;function je(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Xt(e){var r,t;for(t in e)Y(e,t)&&(r=e[t],je(r)?this[t]=r:this["_"+t]=r);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Gs(e,r){var t=Ee({},e),i;for(i in r)Y(r,i)&&(Fe(e[i])&&Fe(r[i])?(t[i]={},Ee(t[i],e[i]),Ee(t[i],r[i])):r[i]!=null?t[i]=r[i]:delete t[i]);for(i in e)Y(e,i)&&!Y(r,i)&&Fe(e[i])&&(t[i]=Ee({},t[i]));return t}function rr(e){e!=null&&this.set(e)}var qs;Object.keys?qs=Object.keys:qs=function(e){var r,t=[];for(r in e)Y(e,r)&&t.push(r);return t};var Kt={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function ei(e,r,t){var i=this._calendar[e]||this._calendar.sameElse;return je(i)?i.call(r,t):i}function ve(e,r,t){var i=""+Math.abs(e),a=r-i.length,n=e>=0;return(n?t?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+i}var tr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ps=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ls={},$e={};function S(e,r,t,i){var a=i;typeof i=="string"&&(a=function(){return this[i]()}),e&&($e[e]=a),r&&($e[r[0]]=function(){return ve(a.apply(this,arguments),r[1],r[2])}),t&&($e[t]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function si(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function ri(e){var r=e.match(tr),t,i;for(t=0,i=r.length;t<i;t++)$e[r[t]]?r[t]=$e[r[t]]:r[t]=si(r[t]);return function(a){var n="",o;for(o=0;o<i;o++)n+=je(r[o])?r[o].call(a,e):r[o];return n}}function xs(e,r){return e.isValid()?(r=Rr(r,e.localeData()),Ls[r]=Ls[r]||ri(r),Ls[r](e)):e.localeData().invalidDate()}function Rr(e,r){var t=5;function i(a){return r.longDateFormat(a)||a}for(ps.lastIndex=0;t>=0&&ps.test(e);)e=e.replace(ps,i),ps.lastIndex=0,t-=1;return e}var ti={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function ii(e){var r=this._longDateFormat[e],t=this._longDateFormat[e.toUpperCase()];return r||!t?r:(this._longDateFormat[e]=t.match(tr).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[e])}var ai="Invalid date";function ni(){return this._invalidDate}var oi="%d",li=/\d{1,2}/;function ci(e){return this._ordinal.replace("%d",e)}var di={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ui(e,r,t,i){var a=this._relativeTime[t];return je(a)?a(e,r,t,i):a.replace(/%d/i,e)}function hi(e,r){var t=this._relativeTime[e>0?"future":"past"];return je(t)?t(r):t.replace(/%s/i,r)}var Ar={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function le(e){return typeof e=="string"?Ar[e]||Ar[e.toLowerCase()]:void 0}function ir(e){var r={},t,i;for(i in e)Y(e,i)&&(t=le(i),t&&(r[t]=e[i]));return r}var mi={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function fi(e){var r=[],t;for(t in e)Y(e,t)&&r.push({unit:t,priority:mi[t]});return r.sort(function(i,a){return i.priority-a.priority}),r}var Fr=/\d/,re=/\d\d/,Lr=/\d{3}/,ar=/\d{4}/,Ms=/[+-]?\d{6}/,G=/\d\d?/,Wr=/\d\d\d\d?/,Br=/\d\d\d\d\d\d?/,Ds=/\d{1,3}/,nr=/\d{1,4}/,Ts=/[+-]?\d{1,6}/,Je=/\d+/,Ps=/[+-]?\d+/,pi=/Z|[+-]\d\d:?\d\d/gi,Us=/Z|[+-]\d\d(?::?\d\d)?/gi,gi=/[+-]?\d+(\.\d{1,3})?/,ds=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Xe=/^[1-9]\d?/,or=/^([1-9]\d|\d)/,bs;bs={};function y(e,r,t){bs[e]=je(r)?r:function(i,a){return i&&t?t:r}}function xi(e,r){return Y(bs,e)?bs[e](r._strict,r._locale):new RegExp(vi(e))}function vi(e){return ke(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(r,t,i,a,n){return t||i||a||n}))}function ke(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ae(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function T(e){var r=+e,t=0;return r!==0&&isFinite(r)&&(t=ae(r)),t}var $s={};function L(e,r){var t,i=r,a;for(typeof e=="string"&&(e=[e]),Me(r)&&(i=function(n,o){o[r]=T(n)}),a=e.length,t=0;t<a;t++)$s[e[t]]=i}function us(e,r){L(e,function(t,i,a,n){a._w=a._w||{},r(t,a._w,a,n)})}function yi(e,r,t){r!=null&&Y($s,e)&&$s[e](r,t._a,t,e)}function Es(e){return e%4===0&&e%100!==0||e%400===0}var X=0,Ne=1,xe=2,J=3,he=4,Ae=5,Re=6,ji=7,bi=8;S("Y",0,0,function(){var e=this.year();return e<=9999?ve(e,4):"+"+e});S(0,["YY",2],0,function(){return this.year()%100});S(0,["YYYY",4],0,"year");S(0,["YYYYY",5],0,"year");S(0,["YYYYYY",6,!0],0,"year");y("Y",Ps);y("YY",G,re);y("YYYY",nr,ar);y("YYYYY",Ts,Ms);y("YYYYYY",Ts,Ms);L(["YYYYY","YYYYYY"],X);L("YYYY",function(e,r){r[X]=e.length===2?v.parseTwoDigitYear(e):T(e)});L("YY",function(e,r){r[X]=v.parseTwoDigitYear(e)});L("Y",function(e,r){r[X]=parseInt(e,10)});function ts(e){return Es(e)?366:365}v.parseTwoDigitYear=function(e){return T(e)+(T(e)>68?1900:2e3)};var Vr=Ke("FullYear",!0);function Si(){return Es(this.year())}function Ke(e,r){return function(t){return t!=null?(Hr(this,e,t),v.updateOffset(this,r),this):is(this,e)}}function is(e,r){if(!e.isValid())return NaN;var t=e._d,i=e._isUTC;switch(r){case"Milliseconds":return i?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return i?t.getUTCSeconds():t.getSeconds();case"Minutes":return i?t.getUTCMinutes():t.getMinutes();case"Hours":return i?t.getUTCHours():t.getHours();case"Date":return i?t.getUTCDate():t.getDate();case"Day":return i?t.getUTCDay():t.getDay();case"Month":return i?t.getUTCMonth():t.getMonth();case"FullYear":return i?t.getUTCFullYear():t.getFullYear();default:return NaN}}function Hr(e,r,t){var i,a,n,o,l;if(!(!e.isValid()||isNaN(t))){switch(i=e._d,a=e._isUTC,r){case"Milliseconds":return void(a?i.setUTCMilliseconds(t):i.setMilliseconds(t));case"Seconds":return void(a?i.setUTCSeconds(t):i.setSeconds(t));case"Minutes":return void(a?i.setUTCMinutes(t):i.setMinutes(t));case"Hours":return void(a?i.setUTCHours(t):i.setHours(t));case"Date":return void(a?i.setUTCDate(t):i.setDate(t));case"FullYear":break;default:return}n=t,o=e.month(),l=e.date(),l=l===29&&o===1&&!Es(n)?28:l,a?i.setUTCFullYear(n,o,l):i.setFullYear(n,o,l)}}function _i(e){return e=le(e),je(this[e])?this[e]():this}function wi(e,r){if(typeof e=="object"){e=ir(e);var t=fi(e),i,a=t.length;for(i=0;i<a;i++)this[t[i].unit](e[t[i].unit])}else if(e=le(e),je(this[e]))return this[e](r);return this}function Ni(e,r){return(e%r+r)%r}var Q;Array.prototype.indexOf?Q=Array.prototype.indexOf:Q=function(e){var r;for(r=0;r<this.length;++r)if(this[r]===e)return r;return-1};function lr(e,r){if(isNaN(e)||isNaN(r))return NaN;var t=Ni(r,12);return e+=(r-t)/12,t===1?Es(e)?29:28:31-t%7%2}S("M",["MM",2],"Mo",function(){return this.month()+1});S("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});S("MMMM",0,0,function(e){return this.localeData().months(this,e)});y("M",G,Xe);y("MM",G,re);y("MMM",function(e,r){return r.monthsShortRegex(e)});y("MMMM",function(e,r){return r.monthsRegex(e)});L(["M","MM"],function(e,r){r[Ne]=T(e)-1});L(["MMM","MMMM"],function(e,r,t,i){var a=t._locale.monthsParse(e,i,t._strict);a!=null?r[Ne]=a:A(t).invalidMonth=e});var Ai="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Gr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),qr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ki=ds,Ci=ds;function Mi(e,r){return e?me(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||qr).test(r)?"format":"standalone"][e.month()]:me(this._months)?this._months:this._months.standalone}function Di(e,r){return e?me(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[qr.test(r)?"format":"standalone"][e.month()]:me(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Ti(e,r,t){var i,a,n,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)n=ye([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(n,"").toLocaleLowerCase();return t?r==="MMM"?(a=Q.call(this._shortMonthsParse,o),a!==-1?a:null):(a=Q.call(this._longMonthsParse,o),a!==-1?a:null):r==="MMM"?(a=Q.call(this._shortMonthsParse,o),a!==-1?a:(a=Q.call(this._longMonthsParse,o),a!==-1?a:null)):(a=Q.call(this._longMonthsParse,o),a!==-1?a:(a=Q.call(this._shortMonthsParse,o),a!==-1?a:null))}function Pi(e,r,t){var i,a,n;if(this._monthsParseExact)return Ti.call(this,e,r,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(a=ye([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(n="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(n.replace(".",""),"i")),t&&r==="MMMM"&&this._longMonthsParse[i].test(e))return i;if(t&&r==="MMM"&&this._shortMonthsParse[i].test(e))return i;if(!t&&this._monthsParse[i].test(e))return i}}function $r(e,r){if(!e.isValid())return e;if(typeof r=="string"){if(/^\d+$/.test(r))r=T(r);else if(r=e.localeData().monthsParse(r),!Me(r))return e}var t=r,i=e.date();return i=i<29?i:Math.min(i,lr(e.year(),t)),e._isUTC?e._d.setUTCMonth(t,i):e._d.setMonth(t,i),e}function Qr(e){return e!=null?($r(this,e),v.updateOffset(this,!0),this):is(this,"Month")}function Ui(){return lr(this.year(),this.month())}function Ei(e){return this._monthsParseExact?(Y(this,"_monthsRegex")||zr.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Y(this,"_monthsShortRegex")||(this._monthsShortRegex=ki),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Yi(e){return this._monthsParseExact?(Y(this,"_monthsRegex")||zr.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Y(this,"_monthsRegex")||(this._monthsRegex=Ci),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function zr(){function e(h,p){return p.length-h.length}var r=[],t=[],i=[],a,n,o,l;for(a=0;a<12;a++)n=ye([2e3,a]),o=ke(this.monthsShort(n,"")),l=ke(this.months(n,"")),r.push(o),t.push(l),i.push(l),i.push(o);r.sort(e),t.sort(e),i.sort(e),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Oi(e,r,t,i,a,n,o){var l;return e<100&&e>=0?(l=new Date(e+400,r,t,i,a,n,o),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,r,t,i,a,n,o),l}function as(e){var r,t;return e<100&&e>=0?(t=Array.prototype.slice.call(arguments),t[0]=e+400,r=new Date(Date.UTC.apply(null,t)),isFinite(r.getUTCFullYear())&&r.setUTCFullYear(e)):r=new Date(Date.UTC.apply(null,arguments)),r}function Ss(e,r,t){var i=7+r-t,a=(7+as(e,0,i).getUTCDay()-r)%7;return-a+i-1}function Zr(e,r,t,i,a){var n=(7+t-i)%7,o=Ss(e,i,a),l=1+7*(r-1)+n+o,h,p;return l<=0?(h=e-1,p=ts(h)+l):l>ts(e)?(h=e+1,p=l-ts(e)):(h=e,p=l),{year:h,dayOfYear:p}}function ns(e,r,t){var i=Ss(e.year(),r,t),a=Math.floor((e.dayOfYear()-i-1)/7)+1,n,o;return a<1?(o=e.year()-1,n=a+Ce(o,r,t)):a>Ce(e.year(),r,t)?(n=a-Ce(e.year(),r,t),o=e.year()+1):(o=e.year(),n=a),{week:n,year:o}}function Ce(e,r,t){var i=Ss(e,r,t),a=Ss(e+1,r,t);return(ts(e)-i+a)/7}S("w",["ww",2],"wo","week");S("W",["WW",2],"Wo","isoWeek");y("w",G,Xe);y("ww",G,re);y("W",G,Xe);y("WW",G,re);us(["w","ww","W","WW"],function(e,r,t,i){r[i.substr(0,1)]=T(e)});function Ii(e){return ns(e,this._week.dow,this._week.doy).week}var Ri={dow:0,doy:6};function Fi(){return this._week.dow}function Li(){return this._week.doy}function Wi(e){var r=this.localeData().week(this);return e==null?r:this.add((e-r)*7,"d")}function Bi(e){var r=ns(this,1,4).week;return e==null?r:this.add((e-r)*7,"d")}S("d",0,"do","day");S("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});S("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});S("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});S("e",0,0,"weekday");S("E",0,0,"isoWeekday");y("d",G);y("e",G);y("E",G);y("dd",function(e,r){return r.weekdaysMinRegex(e)});y("ddd",function(e,r){return r.weekdaysShortRegex(e)});y("dddd",function(e,r){return r.weekdaysRegex(e)});us(["dd","ddd","dddd"],function(e,r,t,i){var a=t._locale.weekdaysParse(e,i,t._strict);a!=null?r.d=a:A(t).invalidWeekday=e});us(["d","e","E"],function(e,r,t,i){r[i]=T(e)});function Vi(e,r){return typeof e!="string"?e:isNaN(e)?(e=r.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Hi(e,r){return typeof e=="string"?r.weekdaysParse(e)%7||7:isNaN(e)?null:e}function cr(e,r){return e.slice(r,7).concat(e.slice(0,r))}var Gi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Jr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),$i=ds,Qi=ds,zi=ds;function Zi(e,r){var t=me(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(r)?"format":"standalone"];return e===!0?cr(t,this._week.dow):e?t[e.day()]:t}function Ji(e){return e===!0?cr(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Xi(e){return e===!0?cr(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ki(e,r,t){var i,a,n,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)n=ye([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(n,"").toLocaleLowerCase();return t?r==="dddd"?(a=Q.call(this._weekdaysParse,o),a!==-1?a:null):r==="ddd"?(a=Q.call(this._shortWeekdaysParse,o),a!==-1?a:null):(a=Q.call(this._minWeekdaysParse,o),a!==-1?a:null):r==="dddd"?(a=Q.call(this._weekdaysParse,o),a!==-1||(a=Q.call(this._shortWeekdaysParse,o),a!==-1)?a:(a=Q.call(this._minWeekdaysParse,o),a!==-1?a:null)):r==="ddd"?(a=Q.call(this._shortWeekdaysParse,o),a!==-1||(a=Q.call(this._weekdaysParse,o),a!==-1)?a:(a=Q.call(this._minWeekdaysParse,o),a!==-1?a:null)):(a=Q.call(this._minWeekdaysParse,o),a!==-1||(a=Q.call(this._weekdaysParse,o),a!==-1)?a:(a=Q.call(this._shortWeekdaysParse,o),a!==-1?a:null))}function ea(e,r,t){var i,a,n;if(this._weekdaysParseExact)return Ki.call(this,e,r,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(a=ye([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(n="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[i]=new RegExp(n.replace(".",""),"i")),t&&r==="dddd"&&this._fullWeekdaysParse[i].test(e))return i;if(t&&r==="ddd"&&this._shortWeekdaysParse[i].test(e))return i;if(t&&r==="dd"&&this._minWeekdaysParse[i].test(e))return i;if(!t&&this._weekdaysParse[i].test(e))return i}}function sa(e){if(!this.isValid())return e!=null?this:NaN;var r=is(this,"Day");return e!=null?(e=Vi(e,this.localeData()),this.add(e-r,"d")):r}function ra(e){if(!this.isValid())return e!=null?this:NaN;var r=(this.day()+7-this.localeData()._week.dow)%7;return e==null?r:this.add(e-r,"d")}function ta(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var r=Hi(e,this.localeData());return this.day(this.day()%7?r:r-7)}else return this.day()||7}function ia(e){return this._weekdaysParseExact?(Y(this,"_weekdaysRegex")||dr.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Y(this,"_weekdaysRegex")||(this._weekdaysRegex=$i),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function aa(e){return this._weekdaysParseExact?(Y(this,"_weekdaysRegex")||dr.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Y(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Qi),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function na(e){return this._weekdaysParseExact?(Y(this,"_weekdaysRegex")||dr.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Y(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=zi),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function dr(){function e(g,b){return b.length-g.length}var r=[],t=[],i=[],a=[],n,o,l,h,p;for(n=0;n<7;n++)o=ye([2e3,1]).day(n),l=ke(this.weekdaysMin(o,"")),h=ke(this.weekdaysShort(o,"")),p=ke(this.weekdays(o,"")),r.push(l),t.push(h),i.push(p),a.push(l),a.push(h),a.push(p);r.sort(e),t.sort(e),i.sort(e),a.sort(e),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function ur(){return this.hours()%12||12}function oa(){return this.hours()||24}S("H",["HH",2],0,"hour");S("h",["hh",2],0,ur);S("k",["kk",2],0,oa);S("hmm",0,0,function(){return""+ur.apply(this)+ve(this.minutes(),2)});S("hmmss",0,0,function(){return""+ur.apply(this)+ve(this.minutes(),2)+ve(this.seconds(),2)});S("Hmm",0,0,function(){return""+this.hours()+ve(this.minutes(),2)});S("Hmmss",0,0,function(){return""+this.hours()+ve(this.minutes(),2)+ve(this.seconds(),2)});function Xr(e,r){S(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),r)})}Xr("a",!0);Xr("A",!1);function Kr(e,r){return r._meridiemParse}y("a",Kr);y("A",Kr);y("H",G,or);y("h",G,Xe);y("k",G,Xe);y("HH",G,re);y("hh",G,re);y("kk",G,re);y("hmm",Wr);y("hmmss",Br);y("Hmm",Wr);y("Hmmss",Br);L(["H","HH"],J);L(["k","kk"],function(e,r,t){var i=T(e);r[J]=i===24?0:i});L(["a","A"],function(e,r,t){t._isPm=t._locale.isPM(e),t._meridiem=e});L(["h","hh"],function(e,r,t){r[J]=T(e),A(t).bigHour=!0});L("hmm",function(e,r,t){var i=e.length-2;r[J]=T(e.substr(0,i)),r[he]=T(e.substr(i)),A(t).bigHour=!0});L("hmmss",function(e,r,t){var i=e.length-4,a=e.length-2;r[J]=T(e.substr(0,i)),r[he]=T(e.substr(i,2)),r[Ae]=T(e.substr(a)),A(t).bigHour=!0});L("Hmm",function(e,r,t){var i=e.length-2;r[J]=T(e.substr(0,i)),r[he]=T(e.substr(i))});L("Hmmss",function(e,r,t){var i=e.length-4,a=e.length-2;r[J]=T(e.substr(0,i)),r[he]=T(e.substr(i,2)),r[Ae]=T(e.substr(a))});function la(e){return(e+"").toLowerCase().charAt(0)==="p"}var ca=/[ap]\.?m?\.?/i,da=Ke("Hours",!0);function ua(e,r,t){return e>11?t?"pm":"PM":t?"am":"AM"}var et={calendar:Kt,longDateFormat:ti,invalidDate:ai,ordinal:oi,dayOfMonthOrdinalParse:li,relativeTime:di,months:Ai,monthsShort:Gr,week:Ri,weekdays:Gi,weekdaysMin:qi,weekdaysShort:Jr,meridiemParse:ca},q={},ss={},os;function ha(e,r){var t,i=Math.min(e.length,r.length);for(t=0;t<i;t+=1)if(e[t]!==r[t])return t;return i}function kr(e){return e&&e.toLowerCase().replace("_","-")}function ma(e){for(var r=0,t,i,a,n;r<e.length;){for(n=kr(e[r]).split("-"),t=n.length,i=kr(e[r+1]),i=i?i.split("-"):null;t>0;){if(a=Ys(n.slice(0,t).join("-")),a)return a;if(i&&i.length>=t&&ha(n,i)>=t-1)break;t--}r++}return os}function fa(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Ys(e){var r=null,t;if(q[e]===void 0&&typeof js<"u"&&js&&js.exports&&fa(e))try{r=os._abbr,t=require,t("./locale/"+e),Oe(r)}catch{q[e]=null}return q[e]}function Oe(e,r){var t;return e&&(se(r)?t=De(e):t=hr(e,r),t?os=t:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),os._abbr}function hr(e,r){if(r!==null){var t,i=et;if(r.abbr=e,q[e]!=null)Ir("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=q[e]._config;else if(r.parentLocale!=null)if(q[r.parentLocale]!=null)i=q[r.parentLocale]._config;else if(t=Ys(r.parentLocale),t!=null)i=t._config;else return ss[r.parentLocale]||(ss[r.parentLocale]=[]),ss[r.parentLocale].push({name:e,config:r}),null;return q[e]=new rr(Gs(i,r)),ss[e]&&ss[e].forEach(function(a){hr(a.name,a.config)}),Oe(e),q[e]}else return delete q[e],null}function pa(e,r){if(r!=null){var t,i,a=et;q[e]!=null&&q[e].parentLocale!=null?q[e].set(Gs(q[e]._config,r)):(i=Ys(e),i!=null&&(a=i._config),r=Gs(a,r),i==null&&(r.abbr=e),t=new rr(r),t.parentLocale=q[e],q[e]=t),Oe(e)}else q[e]!=null&&(q[e].parentLocale!=null?(q[e]=q[e].parentLocale,e===Oe()&&Oe(e)):q[e]!=null&&delete q[e]);return q[e]}function De(e){var r;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return os;if(!me(e)){if(r=Ys(e),r)return r;e=[e]}return ma(e)}function ga(){return qs(q)}function mr(e){var r,t=e._a;return t&&A(e).overflow===-2&&(r=t[Ne]<0||t[Ne]>11?Ne:t[xe]<1||t[xe]>lr(t[X],t[Ne])?xe:t[J]<0||t[J]>24||t[J]===24&&(t[he]!==0||t[Ae]!==0||t[Re]!==0)?J:t[he]<0||t[he]>59?he:t[Ae]<0||t[Ae]>59?Ae:t[Re]<0||t[Re]>999?Re:-1,A(e)._overflowDayOfYear&&(r<X||r>xe)&&(r=xe),A(e)._overflowWeeks&&r===-1&&(r=ji),A(e)._overflowWeekday&&r===-1&&(r=bi),A(e).overflow=r),e}var xa=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,va=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ya=/Z|[+-]\d\d(?::?\d\d)?/,gs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ws=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ja=/^\/?Date\((-?\d+)/i,ba=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Sa={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function st(e){var r,t,i=e._i,a=xa.exec(i)||va.exec(i),n,o,l,h,p=gs.length,g=Ws.length;if(a){for(A(e).iso=!0,r=0,t=p;r<t;r++)if(gs[r][1].exec(a[1])){o=gs[r][0],n=gs[r][2]!==!1;break}if(o==null){e._isValid=!1;return}if(a[3]){for(r=0,t=g;r<t;r++)if(Ws[r][1].exec(a[3])){l=(a[2]||" ")+Ws[r][0];break}if(l==null){e._isValid=!1;return}}if(!n&&l!=null){e._isValid=!1;return}if(a[4])if(ya.exec(a[4]))h="Z";else{e._isValid=!1;return}e._f=o+(l||"")+(h||""),pr(e)}else e._isValid=!1}function _a(e,r,t,i,a,n){var o=[wa(e),Gr.indexOf(r),parseInt(t,10),parseInt(i,10),parseInt(a,10)];return n&&o.push(parseInt(n,10)),o}function wa(e){var r=parseInt(e,10);return r<=49?2e3+r:r<=999?1900+r:r}function Na(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Aa(e,r,t){if(e){var i=Jr.indexOf(e),a=new Date(r[0],r[1],r[2]).getDay();if(i!==a)return A(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function ka(e,r,t){if(e)return Sa[e];if(r)return 0;var i=parseInt(t,10),a=i%100,n=(i-a)/100;return n*60+a}function rt(e){var r=ba.exec(Na(e._i)),t;if(r){if(t=_a(r[4],r[3],r[2],r[5],r[6],r[7]),!Aa(r[1],t,e))return;e._a=t,e._tzm=ka(r[8],r[9],r[10]),e._d=as.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),A(e).rfc2822=!0}else e._isValid=!1}function Ca(e){var r=ja.exec(e._i);if(r!==null){e._d=new Date(+r[1]);return}if(st(e),e._isValid===!1)delete e._isValid;else return;if(rt(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:v.createFromInputFallback(e)}v.createFromInputFallback=oe("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Ge(e,r,t){return e??r??t}function Ma(e){var r=new Date(v.now());return e._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()]}function fr(e){var r,t,i=[],a,n,o;if(!e._d){for(a=Ma(e),e._w&&e._a[xe]==null&&e._a[Ne]==null&&Da(e),e._dayOfYear!=null&&(o=Ge(e._a[X],a[X]),(e._dayOfYear>ts(o)||e._dayOfYear===0)&&(A(e)._overflowDayOfYear=!0),t=as(o,0,e._dayOfYear),e._a[Ne]=t.getUTCMonth(),e._a[xe]=t.getUTCDate()),r=0;r<3&&e._a[r]==null;++r)e._a[r]=i[r]=a[r];for(;r<7;r++)e._a[r]=i[r]=e._a[r]==null?r===2?1:0:e._a[r];e._a[J]===24&&e._a[he]===0&&e._a[Ae]===0&&e._a[Re]===0&&(e._nextDay=!0,e._a[J]=0),e._d=(e._useUTC?as:Oi).apply(null,i),n=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[J]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==n&&(A(e).weekdayMismatch=!0)}}function Da(e){var r,t,i,a,n,o,l,h,p;r=e._w,r.GG!=null||r.W!=null||r.E!=null?(n=1,o=4,t=Ge(r.GG,e._a[X],ns(H(),1,4).year),i=Ge(r.W,1),a=Ge(r.E,1),(a<1||a>7)&&(h=!0)):(n=e._locale._week.dow,o=e._locale._week.doy,p=ns(H(),n,o),t=Ge(r.gg,e._a[X],p.year),i=Ge(r.w,p.week),r.d!=null?(a=r.d,(a<0||a>6)&&(h=!0)):r.e!=null?(a=r.e+n,(r.e<0||r.e>6)&&(h=!0)):a=n),i<1||i>Ce(t,n,o)?A(e)._overflowWeeks=!0:h!=null?A(e)._overflowWeekday=!0:(l=Zr(t,i,a,n,o),e._a[X]=l.year,e._dayOfYear=l.dayOfYear)}v.ISO_8601=function(){};v.RFC_2822=function(){};function pr(e){if(e._f===v.ISO_8601){st(e);return}if(e._f===v.RFC_2822){rt(e);return}e._a=[],A(e).empty=!0;var r=""+e._i,t,i,a,n,o,l=r.length,h=0,p,g;for(a=Rr(e._f,e._locale).match(tr)||[],g=a.length,t=0;t<g;t++)n=a[t],i=(r.match(xi(n,e))||[])[0],i&&(o=r.substr(0,r.indexOf(i)),o.length>0&&A(e).unusedInput.push(o),r=r.slice(r.indexOf(i)+i.length),h+=i.length),$e[n]?(i?A(e).empty=!1:A(e).unusedTokens.push(n),yi(n,i,e)):e._strict&&!i&&A(e).unusedTokens.push(n);A(e).charsLeftOver=l-h,r.length>0&&A(e).unusedInput.push(r),e._a[J]<=12&&A(e).bigHour===!0&&e._a[J]>0&&(A(e).bigHour=void 0),A(e).parsedDateParts=e._a.slice(0),A(e).meridiem=e._meridiem,e._a[J]=Ta(e._locale,e._a[J],e._meridiem),p=A(e).era,p!==null&&(e._a[X]=e._locale.erasConvertYear(p,e._a[X])),fr(e),mr(e)}function Ta(e,r,t){var i;return t==null?r:e.meridiemHour!=null?e.meridiemHour(r,t):(e.isPM!=null&&(i=e.isPM(t),i&&r<12&&(r+=12),!i&&r===12&&(r=0)),r)}function Pa(e){var r,t,i,a,n,o,l=!1,h=e._f.length;if(h===0){A(e).invalidFormat=!0,e._d=new Date(NaN);return}for(a=0;a<h;a++)n=0,o=!1,r=sr({},e),e._useUTC!=null&&(r._useUTC=e._useUTC),r._f=e._f[a],pr(r),er(r)&&(o=!0),n+=A(r).charsLeftOver,n+=A(r).unusedTokens.length*10,A(r).score=n,l?n<i&&(i=n,t=r):(i==null||n<i||o)&&(i=n,t=r,o&&(l=!0));Ee(e,t||r)}function Ua(e){if(!e._d){var r=ir(e._i),t=r.day===void 0?r.date:r.day;e._a=Yr([r.year,r.month,t,r.hour,r.minute,r.second,r.millisecond],function(i){return i&&parseInt(i,10)}),fr(e)}}function Ea(e){var r=new cs(mr(tt(e)));return r._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function tt(e){var r=e._i,t=e._f;return e._locale=e._locale||De(e._l),r===null||t===void 0&&r===""?Cs({nullInput:!0}):(typeof r=="string"&&(e._i=r=e._locale.preparse(r)),fe(r)?new cs(mr(r)):(ls(r)?e._d=r:me(t)?Pa(e):t?pr(e):Ya(e),er(e)||(e._d=null),e))}function Ya(e){var r=e._i;se(r)?e._d=new Date(v.now()):ls(r)?e._d=new Date(r.valueOf()):typeof r=="string"?Ca(e):me(r)?(e._a=Yr(r.slice(0),function(t){return parseInt(t,10)}),fr(e)):Fe(r)?Ua(e):Me(r)?e._d=new Date(r):v.createFromInputFallback(e)}function it(e,r,t,i,a){var n={};return(r===!0||r===!1)&&(i=r,r=void 0),(t===!0||t===!1)&&(i=t,t=void 0),(Fe(e)&&Ks(e)||me(e)&&e.length===0)&&(e=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=a,n._l=t,n._i=e,n._f=r,n._strict=i,Ea(n)}function H(e,r,t,i){return it(e,r,t,i,!1)}var Oa=oe("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=H.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Cs()}),Ia=oe("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=H.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Cs()});function at(e,r){var t,i;if(r.length===1&&me(r[0])&&(r=r[0]),!r.length)return H();for(t=r[0],i=1;i<r.length;++i)(!r[i].isValid()||r[i][e](t))&&(t=r[i]);return t}function Ra(){var e=[].slice.call(arguments,0);return at("isBefore",e)}function Fa(){var e=[].slice.call(arguments,0);return at("isAfter",e)}var La=function(){return Date.now?Date.now():+new Date},rs=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Wa(e){var r,t=!1,i,a=rs.length;for(r in e)if(Y(e,r)&&!(Q.call(rs,r)!==-1&&(e[r]==null||!isNaN(e[r]))))return!1;for(i=0;i<a;++i)if(e[rs[i]]){if(t)return!1;parseFloat(e[rs[i]])!==T(e[rs[i]])&&(t=!0)}return!0}function Ba(){return this._isValid}function Va(){return pe(NaN)}function Os(e){var r=ir(e),t=r.year||0,i=r.quarter||0,a=r.month||0,n=r.week||r.isoWeek||0,o=r.day||0,l=r.hour||0,h=r.minute||0,p=r.second||0,g=r.millisecond||0;this._isValid=Wa(r),this._milliseconds=+g+p*1e3+h*6e4+l*1e3*60*60,this._days=+o+n*7,this._months=+a+i*3+t*12,this._data={},this._locale=De(),this._bubble()}function vs(e){return e instanceof Os}function Qs(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Ha(e,r,t){var i=Math.min(e.length,r.length),a=Math.abs(e.length-r.length),n=0,o;for(o=0;o<i;o++)(t&&e[o]!==r[o]||!t&&T(e[o])!==T(r[o]))&&n++;return n+a}function nt(e,r){S(e,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+ve(~~(t/60),2)+r+ve(~~t%60,2)})}nt("Z",":");nt("ZZ","");y("Z",Us);y("ZZ",Us);L(["Z","ZZ"],function(e,r,t){t._useUTC=!0,t._tzm=gr(Us,e)});var Ga=/([\+\-]|\d\d)/gi;function gr(e,r){var t=(r||"").match(e),i,a,n;return t===null?null:(i=t[t.length-1]||[],a=(i+"").match(Ga)||["-",0,0],n=+(a[1]*60)+T(a[2]),n===0?0:a[0]==="+"?n:-n)}function xr(e,r){var t,i;return r._isUTC?(t=r.clone(),i=(fe(e)||ls(e)?e.valueOf():H(e).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),v.updateOffset(t,!1),t):H(e).local()}function zs(e){return-Math.round(e._d.getTimezoneOffset())}v.updateOffset=function(){};function qa(e,r,t){var i=this._offset||0,a;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=gr(Us,e),e===null)return this}else Math.abs(e)<16&&!t&&(e=e*60);return!this._isUTC&&r&&(a=zs(this)),this._offset=e,this._isUTC=!0,a!=null&&this.add(a,"m"),i!==e&&(!r||this._changeInProgress?ct(this,pe(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,v.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:zs(this)}function $a(e,r){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,r),this):-this.utcOffset()}function Qa(e){return this.utcOffset(0,e)}function za(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(zs(this),"m")),this}function Za(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=gr(pi,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Ja(e){return this.isValid()?(e=e?H(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Xa(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ka(){if(!se(this._isDSTShifted))return this._isDSTShifted;var e={},r;return sr(e,this),e=tt(e),e._a?(r=e._isUTC?ye(e._a):H(e._a),this._isDSTShifted=this.isValid()&&Ha(e._a,r.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function en(){return this.isValid()?!this._isUTC:!1}function sn(){return this.isValid()?this._isUTC:!1}function ot(){return this.isValid()?this._isUTC&&this._offset===0:!1}var rn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,tn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function pe(e,r){var t=e,i=null,a,n,o;return vs(e)?t={ms:e._milliseconds,d:e._days,M:e._months}:Me(e)||!isNaN(+e)?(t={},r?t[r]=+e:t.milliseconds=+e):(i=rn.exec(e))?(a=i[1]==="-"?-1:1,t={y:0,d:T(i[xe])*a,h:T(i[J])*a,m:T(i[he])*a,s:T(i[Ae])*a,ms:T(Qs(i[Re]*1e3))*a}):(i=tn.exec(e))?(a=i[1]==="-"?-1:1,t={y:Ie(i[2],a),M:Ie(i[3],a),w:Ie(i[4],a),d:Ie(i[5],a),h:Ie(i[6],a),m:Ie(i[7],a),s:Ie(i[8],a)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=an(H(t.from),H(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),n=new Os(t),vs(e)&&Y(e,"_locale")&&(n._locale=e._locale),vs(e)&&Y(e,"_isValid")&&(n._isValid=e._isValid),n}pe.fn=Os.prototype;pe.invalid=Va;function Ie(e,r){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*r}function Cr(e,r){var t={};return t.months=r.month()-e.month()+(r.year()-e.year())*12,e.clone().add(t.months,"M").isAfter(r)&&--t.months,t.milliseconds=+r-+e.clone().add(t.months,"M"),t}function an(e,r){var t;return e.isValid()&&r.isValid()?(r=xr(r,e),e.isBefore(r)?t=Cr(e,r):(t=Cr(r,e),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function lt(e,r){return function(t,i){var a,n;return i!==null&&!isNaN(+i)&&(Ir(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=t,t=i,i=n),a=pe(t,i),ct(this,a,e),this}}function ct(e,r,t,i){var a=r._milliseconds,n=Qs(r._days),o=Qs(r._months);e.isValid()&&(i=i??!0,o&&$r(e,is(e,"Month")+o*t),n&&Hr(e,"Date",is(e,"Date")+n*t),a&&e._d.setTime(e._d.valueOf()+a*t),i&&v.updateOffset(e,n||o))}var nn=lt(1,"add"),on=lt(-1,"subtract");function dt(e){return typeof e=="string"||e instanceof String}function ln(e){return fe(e)||ls(e)||dt(e)||Me(e)||dn(e)||cn(e)||e===null||e===void 0}function cn(e){var r=Fe(e)&&!Ks(e),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,n,o=i.length;for(a=0;a<o;a+=1)n=i[a],t=t||Y(e,n);return r&&t}function dn(e){var r=me(e),t=!1;return r&&(t=e.filter(function(i){return!Me(i)&&dt(e)}).length===0),r&&t}function un(e){var r=Fe(e)&&!Ks(e),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,n;for(a=0;a<i.length;a+=1)n=i[a],t=t||Y(e,n);return r&&t}function hn(e,r){var t=e.diff(r,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function mn(e,r){arguments.length===1&&(arguments[0]?ln(arguments[0])?(e=arguments[0],r=void 0):un(arguments[0])&&(r=arguments[0],e=void 0):(e=void 0,r=void 0));var t=e||H(),i=xr(t,this).startOf("day"),a=v.calendarFormat(this,i)||"sameElse",n=r&&(je(r[a])?r[a].call(this,t):r[a]);return this.format(n||this.localeData().calendar(a,this,H(t)))}function fn(){return new cs(this)}function pn(e,r){var t=fe(e)?e:H(e);return this.isValid()&&t.isValid()?(r=le(r)||"millisecond",r==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(r).valueOf()):!1}function gn(e,r){var t=fe(e)?e:H(e);return this.isValid()&&t.isValid()?(r=le(r)||"millisecond",r==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(r).valueOf()<t.valueOf()):!1}function xn(e,r,t,i){var a=fe(e)?e:H(e),n=fe(r)?r:H(r);return this.isValid()&&a.isValid()&&n.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(a,t):!this.isBefore(a,t))&&(i[1]===")"?this.isBefore(n,t):!this.isAfter(n,t))):!1}function vn(e,r){var t=fe(e)?e:H(e),i;return this.isValid()&&t.isValid()?(r=le(r)||"millisecond",r==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(r).valueOf()<=i&&i<=this.clone().endOf(r).valueOf())):!1}function yn(e,r){return this.isSame(e,r)||this.isAfter(e,r)}function jn(e,r){return this.isSame(e,r)||this.isBefore(e,r)}function bn(e,r,t){var i,a,n;if(!this.isValid())return NaN;if(i=xr(e,this),!i.isValid())return NaN;switch(a=(i.utcOffset()-this.utcOffset())*6e4,r=le(r),r){case"year":n=ys(this,i)/12;break;case"month":n=ys(this,i);break;case"quarter":n=ys(this,i)/3;break;case"second":n=(this-i)/1e3;break;case"minute":n=(this-i)/6e4;break;case"hour":n=(this-i)/36e5;break;case"day":n=(this-i-a)/864e5;break;case"week":n=(this-i-a)/6048e5;break;default:n=this-i}return t?n:ae(n)}function ys(e,r){if(e.date()<r.date())return-ys(r,e);var t=(r.year()-e.year())*12+(r.month()-e.month()),i=e.clone().add(t,"months"),a,n;return r-i<0?(a=e.clone().add(t-1,"months"),n=(r-i)/(i-a)):(a=e.clone().add(t+1,"months"),n=(r-i)/(a-i)),-(t+n)||0}v.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";v.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Sn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function _n(e){if(!this.isValid())return null;var r=e!==!0,t=r?this.clone().utc():this;return t.year()<0||t.year()>9999?xs(t,r?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):je(Date.prototype.toISOString)?r?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",xs(t,"Z")):xs(t,r?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function wn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",r="",t,i,a,n;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",r="Z"),t="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",n=r+'[")]',this.format(t+i+a+n)}function Nn(e){e||(e=this.isUtc()?v.defaultFormatUtc:v.defaultFormat);var r=xs(this,e);return this.localeData().postformat(r)}function An(e,r){return this.isValid()&&(fe(e)&&e.isValid()||H(e).isValid())?pe({to:this,from:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function kn(e){return this.from(H(),e)}function Cn(e,r){return this.isValid()&&(fe(e)&&e.isValid()||H(e).isValid())?pe({from:this,to:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function Mn(e){return this.to(H(),e)}function ut(e){var r;return e===void 0?this._locale._abbr:(r=De(e),r!=null&&(this._locale=r),this)}var ht=oe("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function mt(){return this._locale}var _s=1e3,Qe=60*_s,ws=60*Qe,ft=(365*400+97)*24*ws;function ze(e,r){return(e%r+r)%r}function pt(e,r,t){return e<100&&e>=0?new Date(e+400,r,t)-ft:new Date(e,r,t).valueOf()}function gt(e,r,t){return e<100&&e>=0?Date.UTC(e+400,r,t)-ft:Date.UTC(e,r,t)}function Dn(e){var r,t;if(e=le(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?gt:pt,e){case"year":r=t(this.year(),0,1);break;case"quarter":r=t(this.year(),this.month()-this.month()%3,1);break;case"month":r=t(this.year(),this.month(),1);break;case"week":r=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":r=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":r=t(this.year(),this.month(),this.date());break;case"hour":r=this._d.valueOf(),r-=ze(r+(this._isUTC?0:this.utcOffset()*Qe),ws);break;case"minute":r=this._d.valueOf(),r-=ze(r,Qe);break;case"second":r=this._d.valueOf(),r-=ze(r,_s);break}return this._d.setTime(r),v.updateOffset(this,!0),this}function Tn(e){var r,t;if(e=le(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?gt:pt,e){case"year":r=t(this.year()+1,0,1)-1;break;case"quarter":r=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":r=t(this.year(),this.month()+1,1)-1;break;case"week":r=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":r=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":r=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":r=this._d.valueOf(),r+=ws-ze(r+(this._isUTC?0:this.utcOffset()*Qe),ws)-1;break;case"minute":r=this._d.valueOf(),r+=Qe-ze(r,Qe)-1;break;case"second":r=this._d.valueOf(),r+=_s-ze(r,_s)-1;break}return this._d.setTime(r),v.updateOffset(this,!0),this}function Pn(){return this._d.valueOf()-(this._offset||0)*6e4}function Un(){return Math.floor(this.valueOf()/1e3)}function En(){return new Date(this.valueOf())}function Yn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function On(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function In(){return this.isValid()?this.toISOString():null}function Rn(){return er(this)}function Fn(){return Ee({},A(this))}function Ln(){return A(this).overflow}function Wn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}S("N",0,0,"eraAbbr");S("NN",0,0,"eraAbbr");S("NNN",0,0,"eraAbbr");S("NNNN",0,0,"eraName");S("NNNNN",0,0,"eraNarrow");S("y",["y",1],"yo","eraYear");S("y",["yy",2],0,"eraYear");S("y",["yyy",3],0,"eraYear");S("y",["yyyy",4],0,"eraYear");y("N",vr);y("NN",vr);y("NNN",vr);y("NNNN",Xn);y("NNNNN",Kn);L(["N","NN","NNN","NNNN","NNNNN"],function(e,r,t,i){var a=t._locale.erasParse(e,i,t._strict);a?A(t).era=a:A(t).invalidEra=e});y("y",Je);y("yy",Je);y("yyy",Je);y("yyyy",Je);y("yo",eo);L(["y","yy","yyy","yyyy"],X);L(["yo"],function(e,r,t,i){var a;t._locale._eraYearOrdinalRegex&&(a=e.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?r[X]=t._locale.eraYearOrdinalParse(e,a):r[X]=parseInt(e,10)});function Bn(e,r){var t,i,a,n=this._eras||De("en")._eras;for(t=0,i=n.length;t<i;++t){switch(typeof n[t].since){case"string":a=v(n[t].since).startOf("day"),n[t].since=a.valueOf();break}switch(typeof n[t].until){case"undefined":n[t].until=1/0;break;case"string":a=v(n[t].until).startOf("day").valueOf(),n[t].until=a.valueOf();break}}return n}function Vn(e,r,t){var i,a,n=this.eras(),o,l,h;for(e=e.toUpperCase(),i=0,a=n.length;i<a;++i)if(o=n[i].name.toUpperCase(),l=n[i].abbr.toUpperCase(),h=n[i].narrow.toUpperCase(),t)switch(r){case"N":case"NN":case"NNN":if(l===e)return n[i];break;case"NNNN":if(o===e)return n[i];break;case"NNNNN":if(h===e)return n[i];break}else if([o,l,h].indexOf(e)>=0)return n[i]}function Hn(e,r){var t=e.since<=e.until?1:-1;return r===void 0?v(e.since).year():v(e.since).year()+(r-e.offset)*t}function Gn(){var e,r,t,i=this.localeData().eras();for(e=0,r=i.length;e<r;++e)if(t=this.clone().startOf("day").valueOf(),i[e].since<=t&&t<=i[e].until||i[e].until<=t&&t<=i[e].since)return i[e].name;return""}function qn(){var e,r,t,i=this.localeData().eras();for(e=0,r=i.length;e<r;++e)if(t=this.clone().startOf("day").valueOf(),i[e].since<=t&&t<=i[e].until||i[e].until<=t&&t<=i[e].since)return i[e].narrow;return""}function $n(){var e,r,t,i=this.localeData().eras();for(e=0,r=i.length;e<r;++e)if(t=this.clone().startOf("day").valueOf(),i[e].since<=t&&t<=i[e].until||i[e].until<=t&&t<=i[e].since)return i[e].abbr;return""}function Qn(){var e,r,t,i,a=this.localeData().eras();for(e=0,r=a.length;e<r;++e)if(t=a[e].since<=a[e].until?1:-1,i=this.clone().startOf("day").valueOf(),a[e].since<=i&&i<=a[e].until||a[e].until<=i&&i<=a[e].since)return(this.year()-v(a[e].since).year())*t+a[e].offset;return this.year()}function zn(e){return Y(this,"_erasNameRegex")||yr.call(this),e?this._erasNameRegex:this._erasRegex}function Zn(e){return Y(this,"_erasAbbrRegex")||yr.call(this),e?this._erasAbbrRegex:this._erasRegex}function Jn(e){return Y(this,"_erasNarrowRegex")||yr.call(this),e?this._erasNarrowRegex:this._erasRegex}function vr(e,r){return r.erasAbbrRegex(e)}function Xn(e,r){return r.erasNameRegex(e)}function Kn(e,r){return r.erasNarrowRegex(e)}function eo(e,r){return r._eraYearOrdinalRegex||Je}function yr(){var e=[],r=[],t=[],i=[],a,n,o,l,h,p=this.eras();for(a=0,n=p.length;a<n;++a)o=ke(p[a].name),l=ke(p[a].abbr),h=ke(p[a].narrow),r.push(o),e.push(l),t.push(h),i.push(o),i.push(l),i.push(h);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}S(0,["gg",2],0,function(){return this.weekYear()%100});S(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Is(e,r){S(0,[e,e.length],0,r)}Is("gggg","weekYear");Is("ggggg","weekYear");Is("GGGG","isoWeekYear");Is("GGGGG","isoWeekYear");y("G",Ps);y("g",Ps);y("GG",G,re);y("gg",G,re);y("GGGG",nr,ar);y("gggg",nr,ar);y("GGGGG",Ts,Ms);y("ggggg",Ts,Ms);us(["gggg","ggggg","GGGG","GGGGG"],function(e,r,t,i){r[i.substr(0,2)]=T(e)});us(["gg","GG"],function(e,r,t,i){r[i]=v.parseTwoDigitYear(e)});function so(e){return xt.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function ro(e){return xt.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function to(){return Ce(this.year(),1,4)}function io(){return Ce(this.isoWeekYear(),1,4)}function ao(){var e=this.localeData()._week;return Ce(this.year(),e.dow,e.doy)}function no(){var e=this.localeData()._week;return Ce(this.weekYear(),e.dow,e.doy)}function xt(e,r,t,i,a){var n;return e==null?ns(this,i,a).year:(n=Ce(e,i,a),r>n&&(r=n),oo.call(this,e,r,t,i,a))}function oo(e,r,t,i,a){var n=Zr(e,r,t,i,a),o=as(n.year,0,n.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}S("Q",0,"Qo","quarter");y("Q",Fr);L("Q",function(e,r){r[Ne]=(T(e)-1)*3});function lo(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}S("D",["DD",2],"Do","date");y("D",G,Xe);y("DD",G,re);y("Do",function(e,r){return e?r._dayOfMonthOrdinalParse||r._ordinalParse:r._dayOfMonthOrdinalParseLenient});L(["D","DD"],xe);L("Do",function(e,r){r[xe]=T(e.match(G)[0])});var vt=Ke("Date",!0);S("DDD",["DDDD",3],"DDDo","dayOfYear");y("DDD",Ds);y("DDDD",Lr);L(["DDD","DDDD"],function(e,r,t){t._dayOfYear=T(e)});function co(e){var r=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?r:this.add(e-r,"d")}S("m",["mm",2],0,"minute");y("m",G,or);y("mm",G,re);L(["m","mm"],he);var uo=Ke("Minutes",!1);S("s",["ss",2],0,"second");y("s",G,or);y("ss",G,re);L(["s","ss"],Ae);var ho=Ke("Seconds",!1);S("S",0,0,function(){return~~(this.millisecond()/100)});S(0,["SS",2],0,function(){return~~(this.millisecond()/10)});S(0,["SSS",3],0,"millisecond");S(0,["SSSS",4],0,function(){return this.millisecond()*10});S(0,["SSSSS",5],0,function(){return this.millisecond()*100});S(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});S(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});S(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});S(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});y("S",Ds,Fr);y("SS",Ds,re);y("SSS",Ds,Lr);var Ye,yt;for(Ye="SSSS";Ye.length<=9;Ye+="S")y(Ye,Je);function mo(e,r){r[Re]=T(("0."+e)*1e3)}for(Ye="S";Ye.length<=9;Ye+="S")L(Ye,mo);yt=Ke("Milliseconds",!1);S("z",0,0,"zoneAbbr");S("zz",0,0,"zoneName");function fo(){return this._isUTC?"UTC":""}function po(){return this._isUTC?"Coordinated Universal Time":""}var m=cs.prototype;m.add=nn;m.calendar=mn;m.clone=fn;m.diff=bn;m.endOf=Tn;m.format=Nn;m.from=An;m.fromNow=kn;m.to=Cn;m.toNow=Mn;m.get=_i;m.invalidAt=Ln;m.isAfter=pn;m.isBefore=gn;m.isBetween=xn;m.isSame=vn;m.isSameOrAfter=yn;m.isSameOrBefore=jn;m.isValid=Rn;m.lang=ht;m.locale=ut;m.localeData=mt;m.max=Ia;m.min=Oa;m.parsingFlags=Fn;m.set=wi;m.startOf=Dn;m.subtract=on;m.toArray=Yn;m.toObject=On;m.toDate=En;m.toISOString=_n;m.inspect=wn;typeof Symbol<"u"&&Symbol.for!=null&&(m[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});m.toJSON=In;m.toString=Sn;m.unix=Un;m.valueOf=Pn;m.creationData=Wn;m.eraName=Gn;m.eraNarrow=qn;m.eraAbbr=$n;m.eraYear=Qn;m.year=Vr;m.isLeapYear=Si;m.weekYear=so;m.isoWeekYear=ro;m.quarter=m.quarters=lo;m.month=Qr;m.daysInMonth=Ui;m.week=m.weeks=Wi;m.isoWeek=m.isoWeeks=Bi;m.weeksInYear=ao;m.weeksInWeekYear=no;m.isoWeeksInYear=to;m.isoWeeksInISOWeekYear=io;m.date=vt;m.day=m.days=sa;m.weekday=ra;m.isoWeekday=ta;m.dayOfYear=co;m.hour=m.hours=da;m.minute=m.minutes=uo;m.second=m.seconds=ho;m.millisecond=m.milliseconds=yt;m.utcOffset=qa;m.utc=Qa;m.local=za;m.parseZone=Za;m.hasAlignedHourOffset=Ja;m.isDST=Xa;m.isLocal=en;m.isUtcOffset=sn;m.isUtc=ot;m.isUTC=ot;m.zoneAbbr=fo;m.zoneName=po;m.dates=oe("dates accessor is deprecated. Use date instead.",vt);m.months=oe("months accessor is deprecated. Use month instead",Qr);m.years=oe("years accessor is deprecated. Use year instead",Vr);m.zone=oe("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",$a);m.isDSTShifted=oe("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ka);function go(e){return H(e*1e3)}function xo(){return H.apply(null,arguments).parseZone()}function jt(e){return e}var O=rr.prototype;O.calendar=ei;O.longDateFormat=ii;O.invalidDate=ni;O.ordinal=ci;O.preparse=jt;O.postformat=jt;O.relativeTime=ui;O.pastFuture=hi;O.set=Xt;O.eras=Bn;O.erasParse=Vn;O.erasConvertYear=Hn;O.erasAbbrRegex=Zn;O.erasNameRegex=zn;O.erasNarrowRegex=Jn;O.months=Mi;O.monthsShort=Di;O.monthsParse=Pi;O.monthsRegex=Yi;O.monthsShortRegex=Ei;O.week=Ii;O.firstDayOfYear=Li;O.firstDayOfWeek=Fi;O.weekdays=Zi;O.weekdaysMin=Xi;O.weekdaysShort=Ji;O.weekdaysParse=ea;O.weekdaysRegex=ia;O.weekdaysShortRegex=aa;O.weekdaysMinRegex=na;O.isPM=la;O.meridiem=ua;function Ns(e,r,t,i){var a=De(),n=ye().set(i,r);return a[t](n,e)}function bt(e,r,t){if(Me(e)&&(r=e,e=void 0),e=e||"",r!=null)return Ns(e,r,t,"month");var i,a=[];for(i=0;i<12;i++)a[i]=Ns(e,i,t,"month");return a}function jr(e,r,t,i){typeof e=="boolean"?(Me(r)&&(t=r,r=void 0),r=r||""):(r=e,t=r,e=!1,Me(r)&&(t=r,r=void 0),r=r||"");var a=De(),n=e?a._week.dow:0,o,l=[];if(t!=null)return Ns(r,(t+n)%7,i,"day");for(o=0;o<7;o++)l[o]=Ns(r,(o+n)%7,i,"day");return l}function vo(e,r){return bt(e,r,"months")}function yo(e,r){return bt(e,r,"monthsShort")}function jo(e,r,t){return jr(e,r,t,"weekdays")}function bo(e,r,t){return jr(e,r,t,"weekdaysShort")}function So(e,r,t){return jr(e,r,t,"weekdaysMin")}Oe("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var r=e%10,t=T(e%100/10)===1?"th":r===1?"st":r===2?"nd":r===3?"rd":"th";return e+t}});v.lang=oe("moment.lang is deprecated. Use moment.locale instead.",Oe);v.langData=oe("moment.langData is deprecated. Use moment.localeData instead.",De);var _e=Math.abs;function _o(){var e=this._data;return this._milliseconds=_e(this._milliseconds),this._days=_e(this._days),this._months=_e(this._months),e.milliseconds=_e(e.milliseconds),e.seconds=_e(e.seconds),e.minutes=_e(e.minutes),e.hours=_e(e.hours),e.months=_e(e.months),e.years=_e(e.years),this}function St(e,r,t,i){var a=pe(r,t);return e._milliseconds+=i*a._milliseconds,e._days+=i*a._days,e._months+=i*a._months,e._bubble()}function wo(e,r){return St(this,e,r,1)}function No(e,r){return St(this,e,r,-1)}function Mr(e){return e<0?Math.floor(e):Math.ceil(e)}function Ao(){var e=this._milliseconds,r=this._days,t=this._months,i=this._data,a,n,o,l,h;return e>=0&&r>=0&&t>=0||e<=0&&r<=0&&t<=0||(e+=Mr(Zs(t)+r)*864e5,r=0,t=0),i.milliseconds=e%1e3,a=ae(e/1e3),i.seconds=a%60,n=ae(a/60),i.minutes=n%60,o=ae(n/60),i.hours=o%24,r+=ae(o/24),h=ae(_t(r)),t+=h,r-=Mr(Zs(h)),l=ae(t/12),t%=12,i.days=r,i.months=t,i.years=l,this}function _t(e){return e*4800/146097}function Zs(e){return e*146097/4800}function ko(e){if(!this.isValid())return NaN;var r,t,i=this._milliseconds;if(e=le(e),e==="month"||e==="quarter"||e==="year")switch(r=this._days+i/864e5,t=this._months+_t(r),e){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(r=this._days+Math.round(Zs(this._months)),e){case"week":return r/7+i/6048e5;case"day":return r+i/864e5;case"hour":return r*24+i/36e5;case"minute":return r*1440+i/6e4;case"second":return r*86400+i/1e3;case"millisecond":return Math.floor(r*864e5)+i;default:throw new Error("Unknown unit "+e)}}function Te(e){return function(){return this.as(e)}}var wt=Te("ms"),Co=Te("s"),Mo=Te("m"),Do=Te("h"),To=Te("d"),Po=Te("w"),Uo=Te("M"),Eo=Te("Q"),Yo=Te("y"),Oo=wt;function Io(){return pe(this)}function Ro(e){return e=le(e),this.isValid()?this[e+"s"]():NaN}function Le(e){return function(){return this.isValid()?this._data[e]:NaN}}var Fo=Le("milliseconds"),Lo=Le("seconds"),Wo=Le("minutes"),Bo=Le("hours"),Vo=Le("days"),Ho=Le("months"),Go=Le("years");function qo(){return ae(this.days()/7)}var we=Math.round,qe={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function $o(e,r,t,i,a){return a.relativeTime(r||1,!!t,e,i)}function Qo(e,r,t,i){var a=pe(e).abs(),n=we(a.as("s")),o=we(a.as("m")),l=we(a.as("h")),h=we(a.as("d")),p=we(a.as("M")),g=we(a.as("w")),b=we(a.as("y")),x=n<=t.ss&&["s",n]||n<t.s&&["ss",n]||o<=1&&["m"]||o<t.m&&["mm",o]||l<=1&&["h"]||l<t.h&&["hh",l]||h<=1&&["d"]||h<t.d&&["dd",h];return t.w!=null&&(x=x||g<=1&&["w"]||g<t.w&&["ww",g]),x=x||p<=1&&["M"]||p<t.M&&["MM",p]||b<=1&&["y"]||["yy",b],x[2]=r,x[3]=+e>0,x[4]=i,$o.apply(null,x)}function zo(e){return e===void 0?we:typeof e=="function"?(we=e,!0):!1}function Zo(e,r){return qe[e]===void 0?!1:r===void 0?qe[e]:(qe[e]=r,e==="s"&&(qe.ss=r-1),!0)}function Jo(e,r){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=qe,a,n;return typeof e=="object"&&(r=e,e=!1),typeof e=="boolean"&&(t=e),typeof r=="object"&&(i=Object.assign({},qe,r),r.s!=null&&r.ss==null&&(i.ss=r.s-1)),a=this.localeData(),n=Qo(this,!t,i,a),t&&(n=a.pastFuture(+this,n)),a.postformat(n)}var Bs=Math.abs;function He(e){return(e>0)-(e<0)||+e}function Rs(){if(!this.isValid())return this.localeData().invalidDate();var e=Bs(this._milliseconds)/1e3,r=Bs(this._days),t=Bs(this._months),i,a,n,o,l=this.asSeconds(),h,p,g,b;return l?(i=ae(e/60),a=ae(i/60),e%=60,i%=60,n=ae(t/12),t%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",h=l<0?"-":"",p=He(this._months)!==He(l)?"-":"",g=He(this._days)!==He(l)?"-":"",b=He(this._milliseconds)!==He(l)?"-":"",h+"P"+(n?p+n+"Y":"")+(t?p+t+"M":"")+(r?g+r+"D":"")+(a||i||e?"T":"")+(a?b+a+"H":"")+(i?b+i+"M":"")+(e?b+o+"S":"")):"P0D"}var U=Os.prototype;U.isValid=Ba;U.abs=_o;U.add=wo;U.subtract=No;U.as=ko;U.asMilliseconds=wt;U.asSeconds=Co;U.asMinutes=Mo;U.asHours=Do;U.asDays=To;U.asWeeks=Po;U.asMonths=Uo;U.asQuarters=Eo;U.asYears=Yo;U.valueOf=Oo;U._bubble=Ao;U.clone=Io;U.get=Ro;U.milliseconds=Fo;U.seconds=Lo;U.minutes=Wo;U.hours=Bo;U.days=Vo;U.weeks=qo;U.months=Ho;U.years=Go;U.humanize=Jo;U.toISOString=Rs;U.toString=Rs;U.toJSON=Rs;U.locale=ut;U.localeData=mt;U.toIsoString=oe("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Rs);U.lang=ht;S("X",0,0,"unix");S("x",0,0,"valueOf");y("x",Ps);y("X",gi);L("X",function(e,r,t){t._d=new Date(parseFloat(e)*1e3)});L("x",function(e,r,t){t._d=new Date(T(e))});//! moment.js
v.version="2.30.1";Zt(H);v.fn=m;v.min=Ra;v.max=Fa;v.now=La;v.utc=ye;v.unix=go;v.months=vo;v.isDate=ls;v.locale=Oe;v.invalid=Cs;v.duration=pe;v.isMoment=fe;v.weekdays=jo;v.parseZone=xo;v.localeData=De;v.isDuration=vs;v.monthsShort=yo;v.weekdaysMin=So;v.defineLocale=hr;v.updateLocale=pa;v.locales=ga;v.weekdaysShort=bo;v.normalizeUnits=le;v.relativeTimeRounding=zo;v.relativeTimeThreshold=Zo;v.calendarFormat=hn;v.prototype=m;v.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Xo=({videos:e})=>{const r=ne();return s.jsx("div",{className:"feed",children:e.map(t=>s.jsxs("div",{className:"card",style:{cursor:"pointer"},onClick:()=>{console.log("Clicked item:",t),r(`/video/${t.categoryId||0}/${t.id}`)},children:[s.jsx("img",{src:t.thumbnail||"https://via.placeholder.com/320x180?text=No+Thumbnail",alt:""}),s.jsx("h2",{children:t.title}),s.jsx("h3",{children:t.channelTitle||"Creator"}),s.jsxs("p",{children:[zt(t.viewCount||0)," Views • "," "+v(t.created_at).fromNow()]})]},t.id))})},Ko=["All","Comedy","Education","Gaming","Health & Fitness","Music","News & Politics","Sports","Tech & Gadgets","Travel","Vlogs & Lifestyle","More"],el=({sidebar:e,category:r,selectedCategory:t,setSelectedCategory:i})=>{const[a,n]=d.useState([]),[o,l]=d.useState(!0),[h,p]=d.useState(""),g=ne();return d.useEffect(()=>{(async()=>{l(!0),p("");let x=f.from("videos2").select("*").order("created_at",{ascending:!1});r&&r!=="All"&&(x=x.eq("category",r));let{data:_,error:P}=await x;P?(p("Failed to fetch videos."),n([])):n(_||[]),l(!1)})()},[r]),s.jsx(s.Fragment,{children:s.jsxs("div",{className:`container ${e?"":" large-container"}`,children:[s.jsx("div",{className:"category-tabs",children:Ko.map(b=>s.jsx("button",{className:`category-tab${t===b?" active":""}`,onClick:()=>{b==="All"?i("All"):g("/coming-soon")},children:b},b))}),o&&s.jsx("div",{style:{padding:24},children:"Loading videos..."}),h&&s.jsx("div",{style:{padding:24,color:"red"},children:h}),!o&&!h&&a.length>0&&s.jsx(Xo,{videos:a})]})})},sl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAj5JREFUaAXtmd9twjAQxpNQIR5ZoRtkhHSDrtANyAt/nsorvKQbNJ2gbEDYgBFgg/QNkIB+h2RkUgyJcwZc2VJrK7Hv7ufv7Liu57niZsDNwKUZ8C+9NPEuSZL2er3+DoIg7na7cy4fNwUhiM1mM0XwIX5y3/dfuGBuBlKAEELkzWbzOY7jXDzQrQPdgVXGKSDIBCnUqWJL1dc4yAUIEVMkGnVqoyAlILz9fs+y4I2BlIEgBR4apCwEgTQaDRZF2HetKhAE0uv1WGJgTa2qEOCYEQxHYQPRgGBbHzQRLCA6EOQcX/aMao5SG0QXgoLf7XYsC51s1VpodSCw7f70+/02BcFRaikiHQArx4K0YlODnGsrMhqNOhifVCbgGTBHWsaDwSAT5rQVQWpEwsgd6hB/z0wxma/C9xM18GCI6p3aqlL8cCE12PJb5bPE80/0mVA/bUVKOLlFl/Z4PA7/A4i33W4PmWG7IkfVHchxKh6k4RR5ECEojAX9sl2RGb7u9oPgmJKSGlRsVmQJNdIDheUgRwiCsVYRXLV+EIAotoJ8Fe+LrQTByftEDVLFRpDZuX9FWAcib7lifdioyMmWazNIKgcvt61KreKWayvIny2XBQS3KLlsyHT73JYr+9ROLRjOZEOG22e3XNmnNgjyNaVrT9mYqTa23OE129ogdETAJVkEB8trTnTf00QB4k2+UVTZOlzQoXOGoFR9lM/pC4uL7HC1WtHNX6TsqPECMS1ardakeKbSMOWGuBmoMwO/mxHeGRTjsuUAAAAASUVORK5CYII=",rl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAnlJREFUaAXtmdttwjAUhhtUiccyQjYonaCMwAbNBu0TiKe2TwheGKEdoZ0AOkHpBmxQ+gZIQP8/wlHIxcSOY7AUSxG+ncvnY59Y4eqqLvUK1CsgWwFPNijGxuNxe7/fP6PdFX2GfpfQM/M877XX682TOkej0Qv6aDe39Pv9kKGRO+MwAGVdQHyjaRqCFlrUC/3T4XDYYYduOQkCIxNd5QpyLUTlTWF+aqoUBKsUwICfkqqgg3a4hXVVS0EajcajrmIdue12y62mVXJBDntWe4W0vCkhlAuCaAQl9FoXzQRBNHx48mDdmxIGM0Fciwb5M0HQb/WQlwhEJJoCYcrFqHb2iDRbrqRAbKdcU7xHIK6l3PgiHIG4eMgFTATiYsoVEPyNQFyOxhEIGs6lXAKIEkbE1ZQrIPgbguAK3Y13ulgXIM69AJOLHR325IBr7Rrk0iIWRgQfGJaX5piqP+Kwz1UFL23+NR3a7XbvSMFPeG4uyUH4NcONo5BL4Vc6zuTNFyAf54SB7busL45FSCIQTp5MJq3NZhOg2sbj41Et96oCsflf+PzZibWVqkcgSpKJyYwotsE00V2oiWTzh6c9GAwWhQQyJoVnJKNfuQsQjKJyIQRkO9hSC2XhmECxkxQTkFSVQWIQpbOmSZBbCWRqyCQElRs5I4ck8ZvyNqfDNATNGInIarUqvK2qgDAGwsNKZadKVRC0ayQicPBkRKqEMAYCRdKDXjWEMRBcLXwqyyo2IGjXyNbKAmCfLQjaMgIChz+pLF5sQtCuEZBmsxnA8R8BYhuCdo28EKmIL8X1ej1D1T/cnUpfO6j3LIUwZf5iPovTtdF6BeQr8A99dciai5/+3AAAAABJRU5ErkJggg==",tl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAA4tJREFUaAXtmEtIFGEcwPeltC0RRAeh8NrjUNShgjp5iMpAQ7OXhmBFdAnW1V09GSzsrogGHTr0oodBEtGLIjxFQXToFBRBodIhOhRkhwpdt9+fXFk/Z8aZ2ZndleaDYed7/B+///97zfp8XvEi4EXAi4AXgf8lAiMjI8F0Op1wkjfgpDIruvx+fyqTycStyBiNLRvIrFMkJn3WyEGzfeUG8ZGZ807AlB1EIu4ETEWAOAFTMSB5GDaA0/JutVQUyKzzF+3AVCKI8FiGqVQQyzD+2XS6+sP2ujIQCBzK5XLbMLSeZwPPKjNGkTmVSCQuLTbWNZC+vr5llGYcOMz2Wr+YI0b9yJ/s7u6+bDjGqNNOHwt1B1Fsx3gr8hE7OnRkTsTj8Ss6fT7HMsL0OY7zchGUaeNKmZmZ6ejp6bmqpbxokP7+/hoMXAdit5YBh9tIdq6VNXNb1VvUrpVKpQ4A8aFEEOK7BP4m2T+qgtjKyODgYHhqauoCyjpUhaWqk5k2MnMrb88yCNGoJQOPULApr6Rcv6FQqLazs/Oz2A9ZcSKZTK4B4jUyNVbkXBibw48jeQjRb3qNcC4sr6qqGkWm3BBZgeBcuVMYIFMg8o3N4SbTybWttdApg/csfc0qhIw3NbXGxsauEYU6AwMl6cKHY0Dc1zK2KAhbbDuCbVrCJWzLZ0ITQvww3LW4bqxlzDueFTK4jOUg15O7RvYNM8JenSGdTkH8RN8k+ib5/cbvLiPHCvqagLhXUNd81c0IV4+tGHyjKaXf+AuZFzj5kiHjvE+w10/EYrEJVYRs59Q2tY58I4feA7Vdq66bEZSc0xJQ2xg3juPDPKMsxOdqfxH1BiAempXXBOH03oyC/XpKcP4HfTe4Zw339vbKAel0aWA6mYYQ45ogtMf0PANiqLq6OhmNRr/rjSmmnczWk9knVnUsABkYGFidzWblo0gtj5nvZwqvBeqAYut2IcTuApDp6Wn5upvnE/UoURqa1+hwhUzvYzo9tat2AQiK5u76KP8SDAaburq6Xtk1YEZOIFjYtiHExjwQtsR1tG2RDpR/5JJY5+ZUwsZvTMkW+0xsFlPUS2OjKMPAWxb0drcg5BKKmT/8RbTHCQjxWQXZS9t71sROt3YlMdrS0iJ3J9mdHDt35lY13xuBcDj8FYgdGPgkBpdSmctIJBLZyJRqX4oQSyngnq9eBLwIeBH4F4G/vhEjm1hU05UAAAAASUVORK5CYII=",il="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAplJREFUaAXtWF1ugkAQrqaJr9yg3KDeQI5gTyC9gbxofGr75M+L3qDeQDxB9Qb0BvYG+GZiov0mYRsDA7LIALGQkGWH5Zvvm53ZBR4e6qOOQB2BfxGBxi0qZ7NZ53Q6tRuNhnELzrVnz+ez12q1to7j+HFjMwkZj8dms9lcAbQdByxgJxGvw+HQ5bCbnPGarQQRRMnAuUIWsMHTFoLZsADIgsEufiCVbc6JthDMhsUBFWVDPbJB1BZSFGFdP4+6D+Qw/gcYywQcE/d6CffZW2UI2WHleWfZwEg1iPS9XUgA1FGOUFzb0Wi0Uf2qtpEZCYr5TRFG/wPXG9WvahsRUhTR+XxuHI/H57A/ZEDEFh7D9UsTcjgc2pjtrzApLK9hU6r+3Sy/tZBU813goLuZEfFix7fENwrYR2ugzbQipZlYMSEkAKuSjV3cU0SC75iu6ufZigghEfiis8JfdHhD2IH8Ik8BCkukRiCkGxahHEq1uQuh2QgiL8WZxc1dCAr6ryZYj0LG3IWAp5mGKxaCdppxacdICEm7xFZeiDGdTvtJkQz+hPSSxujek5gR4jDHnmFzZEgEFoTIWy83Vscmso8QAdTA52Qy6aH4lzh3+M4wYO5ChE338z7EhBBRCLDQWCBP12QSO6RSS4xwHHAWIV4cWBF2zK7P+dEWglz3ALbnwIqwwbfL+dEWQq8fAOtzYNI2+F3D/5Lzk6nYCQzLKM0MCTI54Dxt8OPjdONEkK9MQujBwWDgobHpugqHdmpVgTTH4W6EXE0t5OYT6qHDRUHItg/SVgueE+JfImBHtiHGvrQJX2+Bb+n6iKQW9glXF6QK4yNCaJ8AMacK5HQ4RITQw/iFs0DzgpRa4yxtF9cRUo+tI1BHIDkCv1Z/yCc2PXrxAAAAAElFTkSuQmCC",al=({videoId:e,thumbnail:r,setThumbnail:t,screenshots:i,setScreenshots:a})=>{const n=As(),o=e||n.videoId,[l,h]=d.useState(null),[p,g]=d.useState(!0),[b,x]=d.useState(""),_=d.useRef(null);d.useEffect(()=>{if(!o){x("No video selected."),g(!1);return}(async()=>{g(!0),x("");let{data:j,error:w}=await f.from("videos2").select("*").eq("id",o).single();w?(x("Video not found."),h(null)):(h(j),(j.thumbnail||j.poster)&&t(j.thumbnail||j.poster)),g(!1)})()},[o,t]);const P=()=>{const C=_.current;if(!C||i.length>=8)return;const j=document.createElement("canvas");j.width=C.videoWidth,j.height=C.videoHeight,j.getContext("2d").drawImage(C,0,0,j.width,j.height);const c=j.toDataURL("image/png");a(N=>N.length<8?[...N,c]:N)},M=async()=>{try{const j=await(await fetch(Ze.ENDPOINTS.CREATE_PRODUCT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thumbnail:r,videoUrl:window.location.href,screenshots:i.slice(0,5)})})).json();j.success&&j.product_url?window.open(j.product_url,"_blank"):alert("Failed to create merch product page.")}catch{alert("Error connecting to merch server. Make sure Flask is running.")}};return p?s.jsx("div",{style:{padding:24},children:"Loading video..."}):b||!l?s.jsx("div",{style:{padding:24,color:"red"},children:b||"Video not found."}):s.jsxs("div",{className:"play-video",children:[s.jsxs("div",{className:"screenmerch-actions",children:[s.jsx("button",{className:"screenmerch-btn",onClick:P,children:"Grab Screenshot"}),s.jsx("button",{className:"screenmerch-btn",onClick:M,children:"Make Merch"})]}),s.jsx("video",{ref:_,controls:!0,width:"100%",style:{background:"#000"},poster:l.thumbnail||"",src:"/WIN_20231111_15_05_23_Pro.mp4",children:"Your browser does not support the video tag."}),s.jsx("h3",{children:l.title}),s.jsxs("div",{className:"play-video-info",children:[s.jsx("p",{children:v(l.created_at).fromNow()}),s.jsxs("div",{children:[s.jsxs("span",{children:[s.jsx("img",{src:sl,alt:""}),"Like"]}),s.jsxs("span",{children:[s.jsx("img",{src:rl,alt:""}),"Dislike"]}),s.jsxs("span",{children:[s.jsx("img",{src:tl,alt:""}),"Share"]}),s.jsxs("span",{children:[s.jsx("img",{src:il,alt:""}),"Save"]})]})]}),s.jsx("hr",{}),s.jsxs("div",{className:"publisher",children:[s.jsx("div",{children:s.jsx("p",{children:"Approved Creator"})}),s.jsx("button",{type:"button",children:"Subscribe"})]}),s.jsx("div",{className:"vid-description",children:s.jsx("p",{children:l.description})})]})},nl=({thumbnail:e,screenshots:r,onDeleteScreenshot:t})=>s.jsxs("div",{className:"screenmerch-images-grid",children:[s.jsxs("div",{className:"screenmerch-image-box",children:[s.jsx("h4",{children:"Thumbnail"}),e?s.jsx("img",{src:e,alt:"Thumbnail",className:"screenmerch-preview"}):s.jsx("div",{className:"screenmerch-placeholder",children:"No thumbnail"})]}),[0,1,2,3,4].map(i=>s.jsxs("div",{className:"screenmerch-image-box",children:[s.jsxs("h4",{children:["Screenshot ",i+1]}),r[i]?s.jsxs("div",{className:"screenmerch-img-wrapper",children:[s.jsx("img",{src:r[i],alt:`Screenshot ${i+1}`,className:"screenmerch-preview"}),s.jsx("button",{className:"screenmerch-delete-btn",onClick:()=>t(i),title:"Delete screenshot",children:"×"})]}):s.jsx("div",{className:"screenmerch-placeholder",children:"No screenshot"})]},i))]}),ol=()=>{const{videoId:e,categoryId:r}=As(),[t,i]=d.useState(null),[a,n]=d.useState([]),o=l=>{n(h=>h.filter((p,g)=>g!==l))};return s.jsxs("div",{className:"play-container",children:[s.jsx("div",{className:"main-video-col",children:e?s.jsx(al,{videoId:e,thumbnail:t,setThumbnail:i,screenshots:a,setScreenshots:n}):s.jsx("div",{style:{padding:24,color:"red"},children:"No video selected."})}),s.jsx("div",{className:"screenmerch-sidebar",children:s.jsx(nl,{thumbnail:t,screenshots:a,onDeleteScreenshot:o})})]})},ll=({sidebar:e})=>{var W,ce;const[r,t]=d.useState(null),[i,a]=d.useState(!0),n=ne(),[o,l]=d.useState(""),[h,p]=d.useState(""),[g,b]=d.useState(null),[x,_]=d.useState(null),[P,M]=d.useState(!1),[C,j]=d.useState(""),[w,c]=d.useState(0);d.useEffect(()=>{(async()=>{try{const{data:{user:B}}=await f.auth.getUser();t(B)}catch(B){console.error("Error fetching user:",B)}finally{a(!1)}})()},[]);const N=(V,B)=>{if(!V)return"No file selected";if(B==="video"){if(!V.type.startsWith("video/"))return"Please select a valid video file";if(V.size>100*1024*1024)return"Video file size must be less than 100MB"}else if(B==="image"){if(!V.type.startsWith("image/"))return"Please select a valid image file";if(V.size>10*1024*1024)return"Image file size must be less than 10MB"}return null},F=V=>{const B=V.target.files[0],z=N(B,"video");z?(j(`❌ ${z}`),b(null)):(b(B),j(""))},D=V=>{const B=V.target.files[0],z=N(B,"image");z?(j(`❌ ${z}`),_(null)):(_(B),j(""))},R=async V=>{var B;if(V.preventDefault(),j(""),c(0),!o.trim()){j("❌ Please enter a video title");return}if(!h.trim()){j("❌ Please enter a video description");return}if(!g){j("❌ Please select a video file");return}if(!x){j("❌ Please select a thumbnail image");return}M(!0);try{console.log("Starting upload process..."),c(10);const z=g.name.split(".").pop(),te=`${r.id}/${Date.now()}.${z}`;console.log("Uploading video to:",te);const{error:ge,data:de}=await f.storage.from("videos2").upload(te,g,{cacheControl:"3600",upsert:!1});if(ge)throw console.error("Video upload error:",ge),new Error(`Video upload failed: ${ge.message}`);c(50);const{data:u}=f.storage.from("videos2").getPublicUrl(te);console.log("Video uploaded successfully:",u.publicUrl),c(60);const E=x.name.split(".").pop(),I=`${r.id}/${Date.now()}_thumb.${E}`;console.log("Uploading thumbnail to:",I);const{error:K,data:Pe}=await f.storage.from("thumbnails").upload(I,x,{cacheControl:"3600",upsert:!1});if(K)throw console.error("Thumbnail upload error:",K),new Error(`Thumbnail upload failed: ${K.message}`);c(80);const{data:hs}=f.storage.from("thumbnails").getPublicUrl(I);console.log("Thumbnail uploaded successfully:",hs.publicUrl),c(90),console.log("Inserting video metadata into database...");const We={title:o.trim(),description:h.trim(),video_url:u.publicUrl,thumbnail:hs.publicUrl,channelTitle:((B=r.user_metadata)==null?void 0:B.name)||r.email||"Unknown Creator",user_id:r.id,verification_status:"verified_via_supabase_auth",created_at:new Date().toISOString()};console.log("Video metadata:",We);const{error:Be,data:ms}=await f.from("videos2").insert([We]).select();if(Be)throw console.error("Database insert error:",Be),new Error(`Database error: ${Be.message}`);c(100),console.log("Video uploaded and saved successfully:",ms),j("✅ Video uploaded successfully! Redirecting you to the homepage..."),l(""),p(""),b(null),_(null),setTimeout(()=>{n("/")},2e3)}catch(z){if(console.error("Upload error:",z),j(`❌ Upload failed: ${z.message}`),z.message.includes("Database error")&&g)try{const te=g.name.split(".").pop(),ge=`${r.id}/${Date.now()}.${te}`;await f.storage.from("videos2").remove([ge]),console.log("Cleaned up uploaded video file")}catch(te){console.error("Failed to cleanup video file:",te)}}finally{M(!1),c(0)}};return i?s.jsx("div",{className:`container ${e?"":" large-container"}`,children:s.jsx("h2",{children:"Loading..."})}):r?s.jsx("div",{className:`container ${e?"":" large-container"}`,children:s.jsxs("div",{style:{maxWidth:700,margin:"20px auto",background:"#fff",padding:24,borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[s.jsx("h2",{children:"Upload a New Video"}),s.jsxs("div",{className:"uploader-info",children:[s.jsx("img",{src:((W=r.user_metadata)==null?void 0:W.picture)||"/default-avatar.jpg",alt:"Your avatar"}),s.jsxs("p",{children:["You are uploading as: ",s.jsx("strong",{children:((ce=r.user_metadata)==null?void 0:ce.name)||r.email||"Your Channel"})]})]}),s.jsxs("form",{onSubmit:R,children:[s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("label",{children:"Title *"}),s.jsx("input",{type:"text",value:o,onChange:V=>l(V.target.value),required:!0,style:{width:"100%",padding:8,marginTop:4},placeholder:"Enter video title"})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("label",{children:"Description *"}),s.jsx("textarea",{value:h,onChange:V=>p(V.target.value),required:!0,style:{width:"100%",padding:8,marginTop:4},rows:4,placeholder:"Enter video description"})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("label",{children:"Video File * (Max 100MB)"}),s.jsx("input",{type:"file",accept:"video/*",onChange:F,required:!0,style:{display:"block",marginTop:4}}),g&&s.jsxs("small",{style:{color:"#666",marginTop:4,display:"block"},children:["Selected: ",g.name," (",(g.size/1024/1024).toFixed(2)," MB)"]})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("label",{children:"Thumbnail Image * (Max 10MB)"}),s.jsx("input",{type:"file",accept:"image/*",onChange:D,required:!0,style:{display:"block",marginTop:4}}),x&&s.jsxs("small",{style:{color:"#666",marginTop:4,display:"block"},children:["Selected: ",x.name," (",(x.size/1024/1024).toFixed(2)," MB)"]})]}),w>0&&s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("div",{style:{width:"100%",backgroundColor:"#f0f0f0",borderRadius:4,overflow:"hidden",marginTop:8},children:s.jsx("div",{style:{width:`${w}%`,height:20,backgroundColor:"#4CAF50",transition:"width 0.3s ease"}})}),s.jsxs("small",{style:{color:"#666"},children:["Upload Progress: ",w,"%"]})]}),C&&s.jsx("div",{className:`upload-message ${C.includes("✅")?"success":"error"}`,children:C}),s.jsx("button",{type:"submit",className:"upload-btn",disabled:P,children:P?"Uploading...":"Upload Video"})]})]})}):s.jsxs("div",{className:`container ${e?"":" large-container"}`,style:{textAlign:"center",paddingTop:"5rem"},children:[s.jsx("h2",{children:"Please Log In to Upload"}),s.jsx("p",{children:"You must sign in with Google to upload videos."}),s.jsx("button",{className:"sign-in-btn",onClick:async()=>{const{error:V}=await f.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/upload`,queryParams:{prompt:"select_account"}}});V&&alert("Login failed: "+V.message)},children:"Sign In with Google"})]})},cl=()=>{const{username:e}=As(),r=ne(),[t,i]=d.useState(null),[a,n]=d.useState([]),[o,l]=d.useState(!0),[h,p]=d.useState(null),[g,b]=d.useState(""),[x,_]=d.useState(!1),[P,M]=d.useState(null);d.useEffect(()=>{e&&(async()=>{l(!0),p(null);const{data:w,error:c}=await f.from("users").select("*").eq("username",e).single();if(c||!w){p("User not found"),l(!1);return}i(w);const{data:N}=await f.from("videos2").select("*").eq("channelTitle",w.display_name||w.username).order("created_at",{ascending:!1});n(N||[]),l(!1)})()},[e]),d.useEffect(()=>{(async()=>{const{data:{user:w}}=await f.auth.getUser();if(w){const{data:c}=await f.from("users").select("role").eq("id",w.id).single();M({...w,...c})}else M(null)})()},[]);const C=()=>{r("/channel-friend")};return P&&P.role!=="creator"?s.jsx(kt,{to:"/",replace:!0}):o?s.jsx("div",{className:"profile-page",children:s.jsx("div",{children:"Loading profile..."})}):h?s.jsx("div",{className:"profile-page",children:s.jsx("div",{children:h})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"channel-header",children:s.jsxs("div",{className:"channel-cover-container",children:[s.jsx("div",{className:"cover-image-container",children:s.jsx("img",{className:"channel-cover-photo",src:t.cover_image_url||"https://images.unsplash.com/photo-1557683316-973673baf926?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",alt:"Channel Cover"})}),s.jsxs("div",{className:"channel-info-overlay",children:[s.jsx("div",{className:"channel-avatar-container",children:s.jsx("img",{className:"channel-avatar",src:t.profile_image_url||"/default-avatar.jpg",alt:"Channel Avatar"})}),s.jsxs("div",{className:"channel-details",children:[s.jsx("h1",{className:"channel-name",children:t.display_name||t.username}),s.jsxs("p",{className:"channel-username",children:["@",t.username]}),t.bio&&s.jsx("p",{className:"channel-bio",children:t.bio}),s.jsx("button",{className:"be-a-friend-btn",onClick:C,disabled:x,children:x?"Requesting...":"Be A FRIEND"}),g==="pending"&&s.jsx("div",{style:{color:"#ffc107",marginTop:8},children:"You have already applied. Please wait for approval."}),g==="already_friend"&&s.jsx("div",{style:{color:"#28a745",marginTop:8},children:"You are already friends with this channel!"}),g==="success"&&s.jsx("div",{style:{color:"#28a745",marginTop:8},children:"Request sent! The channel owner will review your application."}),g==="error"&&s.jsx("div",{style:{color:"#dc3545",marginTop:8},children:"Failed to send request. Please try again."})]})]})]})}),s.jsxs("div",{className:"profile-page",children:[s.jsx("div",{className:"profile-tabs",children:s.jsx("span",{className:"active",children:"Videos"})}),s.jsx("div",{className:"profile-videos",children:a.length===0?s.jsx("div",{children:"No videos yet."}):s.jsx("div",{className:"profile-video-grid",children:a.map(j=>s.jsxs("div",{className:"profile-video-card",style:{cursor:"pointer"},onClick:()=>{console.log("Clicked video:",j),r(`/video/${j.categoryId||0}/${j.id}`)},children:[s.jsx("img",{src:j.thumbnail||"https://via.placeholder.com/320x180?text=No+Thumbnail",alt:j.title}),s.jsx("h3",{children:j.title}),s.jsx("p",{children:j.description})]},j.id))})})]})]})},dl=()=>{const[e]=Tr(),[r,t]=d.useState("verifying"),[i,a]=d.useState("");d.useEffect(()=>{const o=e.get("email"),l=e.get("token");if(!o||!l){t("error");return}a(o),setTimeout(()=>{t("success")},2e3)},[e]);const n=()=>{switch(r){case"verifying":return s.jsxs("div",{className:"approval-content",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("h2",{children:"Verifying your subscription..."}),s.jsx("p",{children:"Please wait while we process your request."})]});case"success":return s.jsxs("div",{className:"approval-content success",children:[s.jsx("div",{className:"success-icon",children:"✓"}),s.jsx("h2",{children:"Subscription Approved!"}),s.jsxs("p",{children:["Welcome to ScreenMerch, ",s.jsx("strong",{children:i}),"!"]}),s.jsx("p",{children:"Your subscription has been successfully activated. You can now enjoy all our premium features."}),s.jsx(Z,{to:"/",className:"home-btn",children:"Go to Home"})]});case"error":return s.jsxs("div",{className:"approval-content error",children:[s.jsx("div",{className:"error-icon",children:"✗"}),s.jsx("h2",{children:"Invalid Link"}),s.jsx("p",{children:"This approval link is invalid or has expired."}),s.jsx("p",{children:"Please try subscribing again or contact support if you continue to have issues."}),s.jsx(Z,{to:"/",className:"home-btn",children:"Go to Home"})]});default:return null}};return s.jsx("div",{className:"approval-page",children:s.jsxs("div",{className:"approval-container",children:[s.jsx("div",{className:"logo-section",children:s.jsx("h1",{children:"ScreenMerch"})}),n()]})})};class Ue{static async getCurrentUserSubscription(){try{const{data:{user:r}}=await f.auth.getUser();if(!r)return null;const{data:t,error:i}=await f.from("user_subscriptions").select("*").eq("user_id",r.id).single();return i?(console.error("Error fetching user subscription:",i),null):t}catch(r){return console.error("Error in getCurrentUserSubscription:",r),null}}static async upsertUserSubscription(r,t={}){try{const{data:{user:i}}=await f.auth.getUser();if(!i)throw new Error("No authenticated user");const a={user_id:i.id,tier:r,status:"active",updated_at:new Date().toISOString(),...t},{data:n,error:o}=await f.from("user_subscriptions").upsert(a,{onConflict:"user_id",ignoreDuplicates:!1}).select().single();return o?(console.error("Error upserting user subscription:",o),null):n}catch(i){return console.error("Error in upsertUserSubscription:",i),null}}static getTierConfig(r){const t={basic:{name:"Basic Tier",price:"Free",features:["Upload videos","Basic analytics","Standard features","Community access"],maxFriends:0,revenueShare:0,canInviteFriends:!1,showFriendsSidebar:!1},premium:{name:"Premium Tier",price:"$9.99/month",features:["Everything in Basic","Advanced analytics","Priority support","Custom branding","Enhanced upload limits"],maxFriends:0,revenueShare:0,canInviteFriends:!1,showFriendsSidebar:!1},creator_network:{name:"Creator Network Tier",price:"$29.99/month",features:["Everything in Premium","Invite friends to create content","Friends list sidebar","Revenue sharing (15%)","Advanced creator tools","Network analytics","Up to 50 friends"],maxFriends:50,revenueShare:.15,canInviteFriends:!0,showFriendsSidebar:!0}};return t[r]||t.basic}static async subscribeToBasicTier(){try{const{data:{user:r}}=await f.auth.getUser();if(!r)return{success:!1,error:"User not authenticated"};const t=await this.upsertUserSubscription("basic",{current_period_start:new Date().toISOString(),current_period_end:null});return t?{success:!0,subscription:t,tier:this.getTierConfig("basic")}:{success:!1,error:"Failed to create subscription"}}catch(r){return console.error("Error subscribing to basic tier:",r),{success:!1,error:r.message}}}static async subscribeToPremiumTier(){var r;try{const{data:{user:t}}=await f.auth.getUser();if(!t)return{success:!1,error:"User not authenticated"};const i=await fetch("http://localhost:3002/api/create-premium-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.id,userEmail:t.email,userName:((r=t.user_metadata)==null?void 0:r.name)||"User",tier:"premium"})});if(!i.ok)throw new Error("Failed to create checkout session");const{url:a}=await i.json();return window.location.href=a,{success:!0,redirecting:!0}}catch(t){return console.error("Error subscribing to premium tier:",t),{success:!1,error:t.message}}}static async subscribeToCreatorNetworkTier(){var r;try{const{data:{user:t}}=await f.auth.getUser();if(!t)return{success:!1,error:"User not authenticated"};const i=await fetch("http://localhost:3002/api/create-creator-network-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.id,userEmail:t.email,userName:((r=t.user_metadata)==null?void 0:r.name)||"User",tier:"creator_network"})});if(!i.ok)throw new Error("Failed to create checkout session");const{url:a}=await i.json();return window.location.href=a,{success:!0,redirecting:!0}}catch(t){return console.error("Error subscribing to creator network tier:",t),{success:!1,error:t.message}}}static async activatePremiumSubscription(r,t){try{const{data:{user:i}}=await f.auth.getUser();if(!i)return{success:!1,error:"User not authenticated"};const a=await this.upsertUserSubscription("premium",{stripe_subscription_id:r,stripe_customer_id:t,current_period_start:new Date().toISOString(),current_period_end:new Date(Date.now()+30*24*60*60*1e3).toISOString()});return a?{success:!0,subscription:a,tier:this.getTierConfig("premium")}:{success:!1,error:"Failed to activate subscription"}}catch(i){return console.error("Error activating premium subscription:",i),{success:!1,error:i.message}}}static async hasMinimumTier(r){try{const t=await this.getCurrentUserSubscription();if(!t)return!1;const i={basic:1,premium:2,creator_network:3},a=i[t.tier]||0,n=i[r]||0;return a>=n}catch(t){return console.error("Error checking tier requirement:",t),!1}}static async getUserSubscriptionWithConfig(){try{const r=await this.getCurrentUserSubscription();if(!r)return null;const t=this.getTierConfig(r.tier);return{...r,config:t}}catch(r){return console.error("Error getting subscription with config:",r),null}}}const ul=({sidebar:e})=>{var Be,ms,br;const[r,t]=d.useState(null),[i,a]=d.useState(null),[n,o]=d.useState(null),[l,h]=d.useState([]),[p,g]=d.useState(!0),[b,x]=d.useState(!1),[_,P]=d.useState({display_name:"",bio:"",cover_image_url:"",profile_image_url:""}),[M,C]=d.useState(!1),[j,w]=d.useState({cover:null,profile:null}),[c,N]=d.useState(""),[F,D]=d.useState(!1),[R,W]=d.useState(!1),[ce,V]=d.useState(!1),[B,z]=d.useState("videos"),[te,ge]=d.useState(null),de=ne(),u=[2,4,1,3,5,2,4,6,3,2,5,4,3,2,1,4,6,3,5,2,4,3,2,1,3,4,5,2,3,4],E=Math.max(...u);d.useEffect(()=>{(async()=>{try{const{data:{user:$},error:be}=await f.auth.getUser();if(!$){de("/");return}t($);const{data:ie,error:es}=await f.from("users").select("*").eq("id",$.id).single();ie&&(a(ie),P({display_name:ie.display_name||"",bio:ie.bio||"",cover_image_url:ie.cover_image_url||"",profile_image_url:ie.profile_image_url||""}));const Ve=await Ue.getCurrentUserSubscription();o(Ve);const{data:fs,error:_l}=await f.from("videos2").select("*").eq("user_id",$.id).order("created_at",{ascending:!1});fs&&h(fs)}catch($){console.error("Error fetching data:",$),de("/")}finally{g(!1)}})()},[de]),d.useEffect(()=>{(async()=>{const{data:{user:$}}=await f.auth.getUser();if($){const{data:be}=await f.from("users").select("role").eq("id",$.id).single();ge({...$,...be})}else ge(null)})()},[]);const I=async(k,$)=>{try{C(!0);const be=k.name.split(".").pop(),ie=`${r.id}/${$}-${Date.now()}.${be}`,{data:es,error:Ve}=await f.storage.from("profile-images").upload(ie,k,{cacheControl:"3600",upsert:!0});if(Ve)return console.error("Error uploading image:",Ve),alert("Failed to upload image. Please try again."),null;const{data:{publicUrl:fs}}=f.storage.from("profile-images").getPublicUrl(ie);return fs}catch(be){return console.error("Error in uploadImageToSupabase:",be),alert("Failed to upload image. Please try again."),null}finally{C(!1)}},K=async(k,$)=>{if(!k.type.startsWith("image/")){alert("Please select a valid image file.");return}if(k.size>5*1024*1024){alert("File size must be less than 5MB.");return}const be=new FileReader;be.onload=es=>{w(Ve=>({...Ve,[$]:es.target.result}))},be.readAsDataURL(k);const ie=await I(k,$);ie&&P(es=>({...es,[`${$}_image_url`]:ie}))},Pe=async()=>{try{const{data:k,error:$}=await f.from("users").update({display_name:_.display_name,bio:_.bio,cover_image_url:_.cover_image_url,profile_image_url:_.profile_image_url,updated_at:new Date().toISOString()}).eq("id",r.id);$?console.error("Error updating profile:",$):(a({...i,..._}),x(!1),w({cover:null,profile:null}))}catch(k){console.error("Error saving profile:",k)}},hs=()=>{de("/channel-friend")},We=n&&Ue.getTierConfig(n.tier).canInviteFriends;return te&&te.role!=="creator"?s.jsx("div",{className:"dashboard-error",children:"Access denied. Only creators can view this page."}):p?s.jsx("div",{className:"dashboard-loading",children:"Loading your dashboard..."}):r?s.jsxs("div",{className:`dashboard-container ${e?"":" large-container"}`,children:[s.jsx("div",{className:"channel-header",children:s.jsxs("div",{className:"channel-cover-container",children:[R?s.jsxs("div",{className:"edit-cover-section",children:[s.jsx("div",{className:"cover-edit-backdrop",onClick:()=>{W(!1),w(k=>({...k,cover:null}))}}),s.jsx("div",{className:"cover-edit-overlay",onClick:k=>k.stopPropagation(),children:s.jsxs("div",{className:"cover-edit-controls",children:[s.jsx("button",{className:"cover-edit-close-btn",onClick:()=>{W(!1),w(k=>({...k,cover:null}))},title:"Close",children:"×"}),s.jsx("h3",{children:"📸 Update Cover Image"}),s.jsxs("div",{className:"file-upload-section",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:k=>k.target.files[0]&&K(k.target.files[0],"cover"),id:"cover-upload",className:"file-input",disabled:M}),s.jsx("label",{htmlFor:"cover-upload",className:"file-upload-btn",children:M?"⏳ Uploading...":"📁 Choose Cover Image"})]}),s.jsx("p",{className:"edit-tip",children:"💡 Tip: Max 5MB, high-quality image (1920x1080 recommended)"})]})}),(j.cover||_.cover_image_url)&&s.jsx("img",{src:j.cover||_.cover_image_url||(i==null?void 0:i.cover_image_url)||"https://images.unsplash.com/photo-1557683316-973673baf926?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",alt:"Cover preview",className:"channel-cover-photo"})]}):s.jsxs("div",{className:"cover-image-container",children:[s.jsx("img",{className:"channel-cover-photo",src:_.cover_image_url||(i==null?void 0:i.cover_image_url)||"https://images.unsplash.com/photo-1557683316-973673baf926?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",alt:"Channel Cover"}),s.jsx("button",{className:"corner-edit-icon cover-edit",onClick:()=>W(!0),title:"Edit cover image",children:"✏️"})]}),s.jsxs("div",{className:"channel-info-overlay",children:[s.jsx("div",{className:"channel-avatar-container",children:ce?s.jsxs("div",{className:"edit-avatar-section",children:[s.jsx("img",{className:"channel-avatar editing",src:j.profile||_.profile_image_url||(i==null?void 0:i.profile_image_url)||((Be=r.user_metadata)==null?void 0:Be.picture)||"/default-avatar.jpg",alt:"Channel Avatar"}),s.jsxs("div",{className:"avatar-upload-section",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:k=>k.target.files[0]&&K(k.target.files[0],"profile"),id:"avatar-upload",className:"file-input",disabled:M}),s.jsx("label",{htmlFor:"avatar-upload",className:"avatar-upload-btn",children:M?"⏳ Uploading...":"📷 Change Avatar"})]})]}):s.jsxs("div",{className:"avatar-with-edit",children:[s.jsx("img",{className:"channel-avatar",src:(i==null?void 0:i.profile_image_url)||((ms=r.user_metadata)==null?void 0:ms.picture)||"/default-avatar.jpg",alt:"Channel Avatar"}),s.jsx("button",{className:"corner-edit-icon avatar-edit",onClick:()=>V(!0),title:"Edit avatar",children:"✏️"})]})}),s.jsx("div",{className:"channel-details",children:b?s.jsxs("div",{className:"edit-details-section",children:[s.jsx("input",{type:"text",placeholder:"Display name",value:_.display_name,onChange:k=>P({..._,display_name:k.target.value}),className:"edit-input edit-title"}),s.jsx("textarea",{placeholder:"Bio/Description",value:_.bio,onChange:k=>P({..._,bio:k.target.value}),className:"edit-textarea",rows:"2"})]}):s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:"channel-name",children:(i==null?void 0:i.display_name)||((br=r.user_metadata)==null?void 0:br.name)||"Your Channel"}),s.jsxs("p",{className:"channel-username",children:["@",(i==null?void 0:i.username)||"username"]}),(i==null?void 0:i.bio)&&s.jsx("p",{className:"channel-bio",children:i.bio}),s.jsx("button",{className:"be-a-friend-btn",onClick:hs,disabled:F,style:{display:"inline-block",width:"auto",minWidth:"unset",textAlign:"center",padding:"10px 18px"},children:F?"Requesting...":"Be A FRIEND"}),c==="pending"&&s.jsx("div",{style:{color:"#ffc107",marginTop:8},children:"You have already applied. Please wait for approval."}),c==="already_friend"&&s.jsx("div",{style:{color:"#28a745",marginTop:8},children:"You are already friends with this channel!"}),c==="success"&&s.jsx("div",{style:{color:"#28a745",marginTop:8},children:"Request sent! The channel owner will review your application."}),c==="error"&&s.jsx("div",{style:{color:"#dc3545",marginTop:8},children:"Failed to send request. Please try again."})]})}),s.jsx("div",{className:"edit-controls",children:b?s.jsxs("div",{className:"edit-buttons",children:[s.jsx("button",{onClick:Pe,className:"save-btn",children:"Save Changes"}),s.jsx("button",{onClick:()=>x(!1),className:"cancel-btn",children:"Cancel"})]}):null})]})]})}),s.jsxs("div",{className:"dashboard-tabs",children:[s.jsxs("button",{className:`tab-button ${B==="videos"?"active":""}`,onClick:()=>z("videos"),children:["📹 Videos (",l.length,")"]}),s.jsx("button",{className:`tab-button ${B==="analytics"?"active":""}`,onClick:()=>z("analytics"),children:"📊 Analytics"}),We&&s.jsx("button",{className:`tab-button ${B==="friends"?"active":""}`,onClick:()=>z("friends"),children:"👥 Friends Revenue"})]}),s.jsxs("div",{className:"tab-content",children:[B==="videos"&&s.jsxs("div",{className:"videos-tab",children:[s.jsx("div",{className:"quick-upload-section",children:s.jsxs("div",{className:"upload-card",children:[s.jsx("div",{className:"upload-icon",children:"📹"}),s.jsx("h3",{children:"Upload New Video"}),s.jsx("p",{children:"Share your content with the ScreenMerch community"}),s.jsx("button",{onClick:()=>de("/upload"),className:"primary-upload-btn",children:"Start Upload"})]})}),s.jsxs("div",{className:"user-videos-section",children:[s.jsx("div",{className:"section-header",children:s.jsxs("h2",{children:["Your Videos (",l.length,")"]})}),l.length>0?s.jsx("div",{className:"dashboard-video-grid",children:l.map(k=>s.jsxs("div",{className:"dashboard-video-card",onClick:()=>de(`/video/${k.categoryId||0}/${k.id}`),children:[s.jsx("img",{src:k.thumbnail,alt:k.title,className:"dashboard-video-thumbnail"}),s.jsxs("div",{className:"dashboard-video-info",children:[s.jsx("h4",{children:k.title}),s.jsx("p",{children:new Date(k.created_at).toLocaleDateString()}),s.jsx("span",{className:"video-views",children:"0 views"})]})]},k.id))}):s.jsx("div",{className:"no-videos-placeholder",children:s.jsxs("div",{className:"placeholder-content",children:[s.jsx("h3",{children:"No videos yet"}),s.jsx("p",{children:"Start building your content library by uploading your first video!"})]})})]}),s.jsxs("div",{className:"getting-started-section",children:[s.jsx("h2",{children:"Getting Started"}),s.jsxs("div",{className:"tips-grid",children:[s.jsxs("div",{className:"tip-card",children:[s.jsx("h4",{children:"🎨 Customize Your Channel"}),s.jsx("p",{children:"Add a cover image, profile picture, and bio to make your channel unique."})]}),s.jsxs("div",{className:"tip-card",children:[s.jsx("h4",{children:"📹 Upload Content"}),s.jsx("p",{children:"Start sharing your videos and build your audience."})]}),We&&s.jsxs("div",{className:"tip-card",children:[s.jsx("h4",{children:"👥 Invite Friends"}),s.jsx("p",{children:"With Creator Network tier, invite friends to collaborate and earn revenue!"})]}),s.jsxs("div",{className:"tip-card",children:[s.jsx("h4",{children:"⬆️ Upgrade Your Plan"}),s.jsxs("p",{children:[s.jsx("button",{onClick:()=>de("/subscription-tiers"),className:"upgrade-link",children:"Explore subscription tiers"})," for more features."]})]})]})]})]}),B==="analytics"&&s.jsx("div",{className:"analytics-tab",children:s.jsxs("div",{className:"sales-analytics-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{children:"📊 Sales Analytics"}),s.jsxs("div",{className:"analytics-summary",children:[s.jsx("span",{className:"total-sales",children:"Total Sales: 47"}),s.jsx("span",{className:"total-revenue",children:"Total Revenue: $1,247.50"})]})]}),s.jsxs("div",{className:"analytics-dashboard",children:[s.jsxs("div",{className:"analytics-overview-cards",children:[s.jsxs("div",{className:"analytics-card",children:[s.jsx("h4",{children:"📈 Sales Per Day"}),s.jsx("div",{className:"analytics-amount",children:"3.2"}),s.jsx("div",{className:"analytics-change",children:"+0.8 vs last week"})]}),s.jsxs("div",{className:"analytics-card",children:[s.jsx("h4",{children:"🛍️ Products Sold"}),s.jsx("div",{className:"analytics-amount",children:"47"}),s.jsx("div",{className:"analytics-change",children:"+12 this month"})]}),s.jsxs("div",{className:"analytics-card",children:[s.jsx("h4",{children:"🎬 Videos with Sales"}),s.jsx("div",{className:"analytics-amount",children:"8"}),s.jsx("div",{className:"analytics-change",children:"3 new this month"})]}),s.jsxs("div",{className:"analytics-card",children:[s.jsx("h4",{children:"💰 Avg Order Value"}),s.jsx("div",{className:"analytics-amount",children:"$26.54"}),s.jsx("div",{className:"analytics-change",children:"+$3.21 vs last month"})]})]}),s.jsxs("div",{className:"sales-chart-section",children:[s.jsx("h3",{children:"📊 Sales Per Day (Last 30 Days)"}),s.jsxs("div",{className:"chart-container",children:[s.jsx("div",{className:"chart-bars",children:u.map((k,$)=>s.jsx("div",{className:"chart-bar",style:{height:`${k/E*200}px`},title:`Day ${$+1}: ${k} sales`,children:s.jsx("span",{className:"bar-value",children:k})},$))}),s.jsxs("div",{className:"chart-labels",children:[s.jsx("span",{children:"1"}),s.jsx("span",{children:"7"}),s.jsx("span",{children:"14"}),s.jsx("span",{children:"21"}),s.jsx("span",{children:"30"})]})]})]}),s.jsxs("div",{className:"products-sold-table",children:[s.jsx("h3",{children:"🛍️ Products Sold"}),s.jsxs("div",{className:"table-header",children:[s.jsx("div",{children:"Product"}),s.jsx("div",{children:"Quantity Sold"}),s.jsx("div",{children:"Revenue"}),s.jsx("div",{children:"Video Source"}),s.jsx("div",{children:"Image"})]}),s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"product-info",children:s.jsx("span",{children:"Soft Tee"})}),s.jsx("div",{children:"12"}),s.jsx("div",{children:"$299.88"}),s.jsx("div",{children:"My Gaming Setup Tour"}),s.jsx("div",{className:"product-image",children:s.jsx("img",{src:"/static/images/guidonteepreview.png",alt:"Soft Tee"})})]}),s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"product-info",children:s.jsx("span",{children:"Unisex Classic Tee"})}),s.jsx("div",{children:"8"}),s.jsx("div",{children:"$199.92"}),s.jsx("div",{children:"React Tutorial Series"}),s.jsx("div",{className:"product-image",children:s.jsx("img",{src:"/static/images/unisexclassicteepreview.png",alt:"Unisex Classic Tee"})})]}),s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"product-info",children:s.jsx("span",{children:"Cropped Hoodie"})}),s.jsx("div",{children:"6"}),s.jsx("div",{children:"$239.94"}),s.jsx("div",{children:"Fitness Motivation Video"}),s.jsx("div",{className:"product-image",children:s.jsx("img",{src:"/static/images/croppedhoodiepreview.png",alt:"Cropped Hoodie"})})]}),s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"product-info",children:s.jsx("span",{children:"Canvas Tote"})}),s.jsx("div",{children:"5"}),s.jsx("div",{children:"$94.95"}),s.jsx("div",{children:"Travel Vlog"}),s.jsx("div",{className:"product-image",children:s.jsx("img",{src:"/static/images/allovertotebagpreview.png",alt:"Canvas Tote"})})]})]}),s.jsxs("div",{className:"video-sources-section",children:[s.jsx("h3",{children:"🎬 Video Sources"}),s.jsxs("div",{className:"video-sources-grid",children:[s.jsxs("div",{className:"video-source-card",children:[s.jsx("img",{src:"/static/images/guidonteepreview.png",alt:"Video thumbnail",className:"video-source-thumbnail"}),s.jsxs("div",{className:"video-source-info",children:[s.jsx("h4",{children:"My Gaming Setup Tour"}),s.jsx("p",{children:"12 sales • $299.88 revenue"}),s.jsx("span",{className:"video-date",children:"Uploaded: Dec 15, 2024"})]})]}),s.jsxs("div",{className:"video-source-card",children:[s.jsx("img",{src:"/static/images/unisexclassicteepreview.png",alt:"Video thumbnail",className:"video-source-thumbnail"}),s.jsxs("div",{className:"video-source-info",children:[s.jsx("h4",{children:"React Tutorial Series"}),s.jsx("p",{children:"8 sales • $199.92 revenue"}),s.jsx("span",{className:"video-date",children:"Uploaded: Dec 10, 2024"})]})]}),s.jsxs("div",{className:"video-source-card",children:[s.jsx("img",{src:"/static/images/croppedhoodiepreview.png",alt:"Video thumbnail",className:"video-source-thumbnail"}),s.jsxs("div",{className:"video-source-info",children:[s.jsx("h4",{children:"Fitness Motivation Video"}),s.jsx("p",{children:"6 sales • $239.94 revenue"}),s.jsx("span",{className:"video-date",children:"Uploaded: Dec 5, 2024"})]})]}),s.jsxs("div",{className:"video-source-card",children:[s.jsx("img",{src:"/static/images/allovertotebagpreview.png",alt:"Video thumbnail",className:"video-source-thumbnail"}),s.jsxs("div",{className:"video-source-info",children:[s.jsx("h4",{children:"Travel Vlog"}),s.jsx("p",{children:"5 sales • $94.95 revenue"}),s.jsx("span",{className:"video-date",children:"Uploaded: Nov 28, 2024"})]})]})]})]}),s.jsxs("div",{className:"analytics-actions",children:[s.jsx("button",{className:"action-btn primary",children:"Export Sales Report"}),s.jsx("button",{className:"action-btn secondary",children:"View Detailed Analytics"}),s.jsx("button",{className:"action-btn secondary",children:"Compare Periods"})]})]})]})}),B==="friends"&&We&&s.jsxs("div",{className:"friends-tab",children:[s.jsxs("div",{className:"friends-management-section",children:[s.jsx("h2",{children:"Invited Friends & Collaborators"}),s.jsx("p",{children:"Manage your content creator network"}),s.jsx("div",{className:"friends-placeholder",children:s.jsx("p",{children:"Feature coming soon: Invite friends to collaborate on your content!"})})]}),s.jsxs("div",{className:"friends-revenue-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{children:"Friends Revenue Analytics"}),s.jsxs("div",{className:"revenue-summary",children:[s.jsx("span",{className:"total-revenue",children:"Total Friend Revenue: $1,247.50"}),s.jsx("span",{className:"your-share",children:"Your Share (15%): $187.13"})]})]}),s.jsxs("div",{className:"revenue-dashboard",children:[s.jsxs("div",{className:"revenue-overview-cards",children:[s.jsxs("div",{className:"revenue-card",children:[s.jsx("h4",{children:"📊 This Month"}),s.jsx("div",{className:"revenue-amount",children:"$324.75"}),s.jsx("div",{className:"revenue-change",children:"+23.5% vs last month"})]}),s.jsxs("div",{className:"revenue-card",children:[s.jsx("h4",{children:"👥 Active Friends"}),s.jsx("div",{className:"revenue-amount",children:"8"}),s.jsx("div",{className:"revenue-change",children:"2 new this month"})]}),s.jsxs("div",{className:"revenue-card",children:[s.jsx("h4",{children:"🎯 Conversion Rate"}),s.jsx("div",{className:"revenue-amount",children:"12.3%"}),s.jsx("div",{className:"revenue-change",children:"+2.1% improvement"})]}),s.jsxs("div",{className:"revenue-card",children:[s.jsx("h4",{children:"💰 Avg Revenue/Friend"}),s.jsx("div",{className:"revenue-amount",children:"$155.94"}),s.jsx("div",{className:"revenue-change",children:"+$12.45 vs last month"})]})]}),s.jsxs("div",{className:"friends-performance-table",children:[s.jsx("h3",{children:"Friend Performance"}),s.jsxs("div",{className:"table-header",children:[s.jsx("div",{children:"Friend"}),s.jsx("div",{children:"Sales Generated"}),s.jsx("div",{children:"Revenue"}),s.jsx("div",{children:"Your Share (15%)"}),s.jsx("div",{children:"Conversion Rate"}),s.jsx("div",{children:"Status"})]}),s.jsxs("div",{className:"table-row",children:[s.jsxs("div",{className:"friend-info",children:[s.jsx("img",{src:"/default-avatar.jpg",alt:"Friend",className:"friend-avatar-small"}),s.jsx("span",{children:"Alex Johnson"})]}),s.jsx("div",{children:"24 sales"}),s.jsx("div",{children:"$487.50"}),s.jsx("div",{className:"revenue-share",children:"$73.13"}),s.jsx("div",{children:"18.2%"}),s.jsx("div",{children:s.jsx("span",{className:"status-active",children:"Active"})})]}),s.jsxs("div",{className:"table-row",children:[s.jsxs("div",{className:"friend-info",children:[s.jsx("img",{src:"/default-avatar.jpg",alt:"Friend",className:"friend-avatar-small"}),s.jsx("span",{children:"Sarah Chen"})]}),s.jsx("div",{children:"18 sales"}),s.jsx("div",{children:"$356.25"}),s.jsx("div",{className:"revenue-share",children:"$53.44"}),s.jsx("div",{children:"15.7%"}),s.jsx("div",{children:s.jsx("span",{className:"status-active",children:"Active"})})]}),s.jsxs("div",{className:"table-row",children:[s.jsxs("div",{className:"friend-info",children:[s.jsx("img",{src:"/default-avatar.jpg",alt:"Friend",className:"friend-avatar-small"}),s.jsx("span",{children:"Mike Rodriguez"})]}),s.jsx("div",{children:"12 sales"}),s.jsx("div",{children:"$234.50"}),s.jsx("div",{className:"revenue-share",children:"$35.18"}),s.jsx("div",{children:"9.8%"}),s.jsx("div",{children:s.jsx("span",{className:"status-inactive",children:"Inactive"})})]}),s.jsxs("div",{className:"table-row",children:[s.jsxs("div",{className:"friend-info",children:[s.jsx("img",{src:"/default-avatar.jpg",alt:"Friend",className:"friend-avatar-small"}),s.jsx("span",{children:"Emma Wilson"})]}),s.jsx("div",{children:"8 sales"}),s.jsx("div",{children:"$169.25"}),s.jsx("div",{className:"revenue-share",children:"$25.39"}),s.jsx("div",{children:"21.5%"}),s.jsx("div",{children:s.jsx("span",{className:"status-new",children:"New"})})]})]}),s.jsxs("div",{className:"revenue-actions",children:[s.jsx("button",{className:"action-btn primary",children:"Export Revenue Report"}),s.jsx("button",{className:"action-btn secondary",children:"Manage Revenue Splits"}),s.jsx("button",{className:"action-btn secondary",children:"View Detailed Analytics"})]})]})]})]})]})]}):s.jsx("div",{className:"dashboard-error",children:"Please log in to see your dashboard."})},hl=()=>{const e=ne(),r=Js(),t=[{id:"basic",name:"Basic Tier",price:"Free",features:["Upload videos","Basic analytics","Standard features","Community access"],color:"#6c757d",popular:!1},{id:"premium",name:"Premium Tier",price:"$9.99/month",features:["Everything in Basic","Advanced analytics","Priority support","Custom branding","Enhanced upload limits"],color:"#007bff",popular:!1},{id:"creator_network",name:"Creator Network Tier",price:"$29.99/month",features:["Everything in Premium","Invite friends to create content","Friends list sidebar","Revenue sharing (15%)","Advanced creator tools","Network analytics","Up to 50 friends"],color:"#28a745",popular:!0}],[i,a]=d.useState(null),[n,o]=d.useState(null),[l,h]=d.useState(!0),[p,g]=d.useState(!1),[b,x]=d.useState("");d.useEffect(()=>{(async()=>{try{const{data:{user:N}}=await f.auth.getUser();if(a(N),N){const F=await Ue.getCurrentUserSubscription();o(F)}}catch(N){console.error("Error fetching user data:",N)}finally{h(!1)}})()},[]),d.useEffect(()=>{if(r.hash){const c=document.getElementById(r.hash.replace("#",""));c&&c.scrollIntoView({behavior:"smooth"})}},[r]);const _=async()=>{if(!i){g(!0),x("Redirecting to Google login...");const{error:c}=await f.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/subscription-tiers`,queryParams:{prompt:"select_account"}}});if(c){x("Login failed. Please try again."),g(!1);return}return}g(!0),x("Setting up your Basic tier subscription...");try{const c=await Ue.subscribeToBasicTier();c.success?(o(c.subscription),x("Welcome to ScreenMerch! Your Basic tier subscription is now active."),setTimeout(()=>{e("/dashboard")},2e3)):x(c.error||"Failed to activate subscription. Please try again.")}catch(c){console.error("Error subscribing to basic tier:",c),x("An error occurred. Please try again.")}finally{g(!1)}},P=async()=>{if(!i){g(!0),x("Redirecting to Google login...");const{error:c}=await f.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/subscription-tiers`,queryParams:{prompt:"select_account"}}});if(c){x("Login failed. Please try again."),g(!1);return}return}g(!0),x("Redirecting to secure payment...");try{const c=await Ue.subscribeToPremiumTier();c.success?c.redirecting?x("Redirecting to Stripe checkout..."):(o(c.subscription),x("Welcome to Premium! Your subscription is now active."),setTimeout(()=>{e("/dashboard")},2e3)):x(c.error||"Failed to start subscription process. Please try again.")}catch(c){console.error("Error subscribing to premium tier:",c),x("An error occurred. Please try again.")}finally{g(!1)}},M=async()=>{if(!i){g(!0),x("Redirecting to Google login...");const{error:c}=await f.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/subscription-tiers`,queryParams:{prompt:"select_account"}}});if(c){x("Login failed. Please try again."),g(!1);return}return}g(!0),x("Redirecting to secure payment...");try{const c=await Ue.subscribeToCreatorNetworkTier();c.success?c.redirecting?x("Redirecting to Stripe checkout..."):(o(c.subscription),x("Welcome to Creator Network! Your subscription is now active."),setTimeout(()=>{e("/dashboard")},2e3)):x(c.error||"Failed to start subscription process. Please try again.")}catch(c){console.error("Error subscribing to creator network tier:",c),x("An error occurred. Please try again.")}finally{g(!1)}},C=c=>{switch(c){case"basic":_();break;case"premium":P();break;case"creator_network":M();break;default:x("Invalid tier selection.")}},j=c=>p?"Processing...":(n==null?void 0:n.tier)===c.id?"Current Plan":c.id==="basic"?i?"Get Started":"Sign Up & Get Started":"Subscribe Now",w=c=>p||(n==null?void 0:n.tier)===c.id;return l?s.jsx("div",{className:"subscription-tiers-page",children:s.jsx("div",{className:"tiers-header",children:s.jsx("h1",{children:"Loading..."})})}):s.jsxs("div",{className:"subscription-tiers-page",children:[s.jsxs("div",{className:"tiers-header",children:[s.jsx("h1",{children:"Choose Your Subscription Tier"}),s.jsx("p",{children:"Unlock your potential with our three-tier subscription system"}),i&&n&&s.jsxs("p",{className:"current-tier-info",children:["Current plan: ",s.jsx("strong",{children:Ue.getTierConfig(n.tier).name})]}),!i&&s.jsx("p",{className:"auth-notice",style:{color:"#666",fontSize:"14px",marginTop:"10px"},children:"Sign in with Google to manage your subscription"})]}),b&&s.jsx("div",{className:`message ${b.includes("Welcome")||b.includes("active")?"success":"info"}`,children:b}),s.jsx("div",{className:"tiers-container",children:t.map((c,N)=>s.jsxs("div",{className:`tier-card ${c.popular?"popular":""} ${(n==null?void 0:n.tier)===c.id?"current":""}`,style:{borderColor:c.color},children:[c.popular&&s.jsx("div",{className:"popular-badge",style:{backgroundColor:c.color},children:"Most Popular"}),(n==null?void 0:n.tier)===c.id&&s.jsx("div",{className:"current-badge",children:"Current Plan"}),s.jsxs("div",{className:"tier-header",children:[s.jsx("h2",{children:c.name}),s.jsxs("div",{className:"tier-price",children:[s.jsx("span",{className:"price",children:c.price}),c.price!=="Free"&&s.jsx("span",{className:"period",children:"/month"})]})]}),s.jsx("div",{className:"tier-features",children:s.jsx("ul",{children:c.features.map((F,D)=>s.jsxs("li",{children:[s.jsx("span",{className:"checkmark",children:"✓"}),F]},D))})}),s.jsx("div",{className:"tier-action",children:s.jsx("button",{className:"subscribe-btn",style:{backgroundColor:w(c)?"#ccc":c.color,cursor:w(c)?"not-allowed":"pointer"},onClick:()=>C(c.id),disabled:w(c),children:j(c)})}),c.name==="Creator Network Tier"&&s.jsxs("div",{className:"network-highlight",id:"be-a-friend-breakdown",children:[s.jsx("h4",{children:"🎯 Creator Network Benefits"}),s.jsx("p",{children:"Invite friends to create content and earn 15% of their sales!"}),s.jsxs("div",{className:"network-features",children:[s.jsxs("div",{className:"network-feature",children:[s.jsx("span",{className:"icon",children:"👥"}),s.jsx("span",{children:"Friends List Sidebar"})]}),s.jsxs("div",{className:"network-feature",children:[s.jsx("span",{className:"icon",children:"💰"}),s.jsx("span",{children:"Revenue Sharing"})]}),s.jsxs("div",{className:"network-feature",children:[s.jsx("span",{className:"icon",children:"📊"}),s.jsx("span",{children:"Network Analytics"})]})]})]})]},N))}),s.jsx("div",{className:"tiers-footer",children:s.jsx("div",{style:{marginTop:32},children:s.jsx(Z,{to:"/",className:"back-home-btn",children:"Back to Home"})})})]})},ml=()=>{const[e]=Tr(),r=ne(),[t,i]=d.useState(!0),[a,n]=d.useState(!1),[o,l]=d.useState(null);return d.useEffect(()=>{(async()=>{const p=e.get("session_id");if(!p){l("No session ID found"),i(!1);return}try{const b=await(await fetch(`${Ze.ENDPOINTS.VERIFY_SUBSCRIPTION}/${p}`)).json();if(b.success){const x=await Ue.activatePremiumSubscription(b.subscription_id,b.customer_id);x.success?(n(!0),setTimeout(()=>{r("/dashboard")},3e3)):l(x.error||"Failed to activate subscription")}else l(b.message||"Payment verification failed")}catch(g){console.error("Error verifying subscription:",g),l("Failed to verify payment")}finally{i(!1)}})()},[e,r]),t?s.jsx("div",{className:"subscription-success-page",children:s.jsxs("div",{className:"success-container",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("h2",{children:"Verifying your subscription..."}),s.jsx("p",{children:"Please wait while we confirm your payment."})]})}):o?s.jsx("div",{className:"subscription-success-page",children:s.jsxs("div",{className:"success-container error",children:[s.jsx("div",{className:"error-icon",children:"❌"}),s.jsx("h2",{children:"Subscription Error"}),s.jsx("p",{children:o}),s.jsx("button",{onClick:()=>r("/subscription-tiers"),className:"retry-btn",children:"Try Again"})]})}):s.jsx("div",{className:"subscription-success-page",children:s.jsxs("div",{className:"success-container",children:[s.jsx("div",{className:"success-icon",children:"🎉"}),s.jsx("h2",{children:"Welcome to Premium!"}),s.jsx("p",{children:"Your subscription has been successfully activated."}),s.jsxs("div",{className:"premium-features",children:[s.jsx("h3",{children:"You now have access to:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"✅ Advanced analytics"}),s.jsx("li",{children:"✅ Priority support"}),s.jsx("li",{children:"✅ Custom branding"}),s.jsx("li",{children:"✅ Enhanced upload limits"}),s.jsx("li",{children:"✅ All Premium features"})]})]}),s.jsx("p",{className:"redirect-notice",children:"Redirecting to your dashboard in 3 seconds..."}),s.jsx("button",{onClick:()=>r("/dashboard"),className:"dashboard-btn",children:"Go to Dashboard Now"})]})})},fl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA10lEQVR4nO3QPQrCQBQE4NVCbAVrsbEUC72Cnaews02TmRB4XsE72HkIQbG0tdFKRGuxE2ElkJCwaGJ+wCJ5MLDF7veSUao0Y9t2B8Dei3cuGu8DOJPUXgBcAQwLwUmOAdwDPLLkAWCS98unJJ8mHsmL5CyLXSM5j4HNLESk/pMsIg2SyxS49itbiUgzFgfQIrlOizNcsrMsq/2t7y7JQ1acYY6u6/ZMfADgUgCu/dwcxxlFqzkViOvgTz5WlRdWSfO3BSrjvWqBLmdFW/MRgE3We9WopHkDXTJU7bkaB10AAAAASUVORK5CYII=",pl=({sidebar:e,category:r,setCategory:t})=>{const[i,a]=d.useState(!0),[n,o]=d.useState([]),[l,h]=d.useState(!0),[p,g]=d.useState("platform"),[b,x]=d.useState(null),_=Js(),[P,M]=d.useState(null);d.useEffect(()=>{const c=()=>{const D=_.pathname;return D==="/dashboard"?{type:"channel",username:"current"}:D.startsWith("/profile/")?{type:"channel",username:D.split("/profile/")[1]}:{type:"platform",username:null}},N=async()=>{h(!0);const D=c();g(D.type);try{D.type==="platform"?await C():await j(D.username)}catch(R){console.error("Error fetching subscribers:",R),o([])}h(!1)},F=async()=>{const{data:{user:D}}=await f.auth.getUser();if(D){const{data:R}=await f.from("users").select("role").eq("id",D.id).single();M({...D,...R})}else M(null)};N(),F()},[_.pathname]);const C=async()=>{const{data:c,error:N}=await f.from("user_subscriptions").select(`
        user_id,
        tier,
        status,
        created_at,
        users:user_id (
          id,
          username,
          display_name,
          profile_image_url
        )
      `).eq("status","active").order("created_at",{ascending:!1});if(N)o([]);else{const F=c.filter(D=>D.users).map(D=>({id:D.user_id,username:D.users.username,name:D.users.display_name||D.users.username,avatar:D.users.profile_image_url,tier:D.tier,joinedAt:D.created_at,type:"platform"}));o(F)}},j=async c=>{try{let N;if(c==="current"){const{data:{user:R}}=await f.auth.getUser();if(!R){o([]);return}N=R.id;const{data:W}=await f.from("users").select("username, display_name").eq("id",R.id).single();x(W)}else{const{data:R,error:W}=await f.from("users").select("id, username, display_name").eq("username",c).single();if(W||!R){o([]);return}N=R.id,x(R)}const{data:F,error:D}=await f.from("subscriptions").select(`
          subscriber_id,
          created_at,
          users:subscriber_id (
            username,
            display_name,
            profile_image_url
          )
        `).eq("channel_id",N).order("created_at",{ascending:!1});if(D)console.error("Error fetching channel subscribers:",D),o([]);else{const R=F.filter(W=>W.users).map(W=>({id:W.subscriber_id,username:W.users.username,name:W.users.display_name||W.users.username,avatar:W.users.profile_image_url,joinedAt:W.created_at,type:"channel",channelId:N}));o(R)}}catch(N){console.error("Error in fetchChannelSubscribers:",N),o([])}},w=async(c,N,F,D)=>{if(c.preventDefault(),!!window.confirm(`Are you sure you want to unsubscribe from ${F}?`))try{const{error:R}=await f.from("subscriptions").delete().eq("channel_id",D).eq("subscriber_id",N);R?(console.error("Error unsubscribing:",R),alert("Failed to unsubscribe. Please try again.")):(o(W=>W.filter(ce=>ce.id!==N)),alert(`Successfully unsubscribed from ${F}`))}catch(R){console.error("Error unsubscribing:",R),alert("Failed to unsubscribe. Please try again.")}};return s.jsxs("div",{className:`sidebar ${e?"":"small-sidebar"}`,children:[s.jsxs("div",{className:"shortcut-links",children:[s.jsxs(Z,{to:"/",className:`side-link ${r===0?"active":""}`,onClick:()=>t(0),children:[s.jsx("img",{src:fl,alt:""}),s.jsx("p",{children:"Home"})]}),P&&P.role==="creator"&&s.jsx(Z,{to:"/dashboard",children:"Dashboard"}),s.jsx("hr",{})]}),s.jsxs("div",{className:"subscribed-list",children:[s.jsxs("h3",{style:{cursor:"pointer"},onClick:()=>a(c=>!c),children:[p==="platform"?"SCREENMERCH COMMUNITY":p==="channel"?"Channel Friends":"SUBSCRIBERS"," ",i?"▲":"▼"]}),i&&s.jsx("div",{children:l?s.jsx("div",{className:"loading-subs",children:"Loading subscribers..."}):n.length===0?s.jsx("div",{className:"no-subs",children:p==="platform"?"No platform subscribers yet.":"No channel friends yet."}):s.jsx("div",{className:"subscribers-list",children:n.map(c=>s.jsxs("div",{className:"subscriber-item-container",children:[s.jsxs(Z,{to:`/profile/${c.username}`,className:"side-link subscriber-item",children:[s.jsx("img",{src:c.avatar||"/default-avatar.jpg",alt:c.name,className:"subscriber-avatar"}),s.jsxs("div",{className:"subscriber-info",children:[s.jsx("p",{className:"subscriber-name",children:c.name}),c.type==="platform"&&c.tier&&s.jsx("span",{className:`tier-badge tier-${c.tier}`,children:c.tier==="basic"?"Free":c.tier==="premium"?"Premium":c.tier==="creator_network"?"Creator":"Basic"}),c.type==="channel"&&s.jsx("span",{className:"subscriber-badge",children:"Subscriber"})]})]}),c.type==="channel"&&s.jsx("button",{className:"sidebar-unsubscribe-btn",onClick:N=>w(N,c.id,c.name,c.channelId),title:`Unsubscribe from ${c.name}`,children:"×"})]},c.id))})})]})]})},gl=()=>{const e=ne();return s.jsxs("div",{style:{minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[s.jsx("h1",{style:{fontSize:"3rem",marginBottom:16},children:"🚧 Coming Soon!"}),s.jsx("p",{style:{fontSize:"1.2rem",color:"#555",marginBottom:32},children:"This category or feature is not available yet. Check back soon for updates!"}),s.jsx("button",{onClick:()=>e("/"),style:{padding:"12px 32px",fontSize:"1rem",borderRadius:8,background:"#222",color:"#fff",border:"none",cursor:"pointer"},children:"Back to Home"})]})},Dr=()=>{const{channelUsername:e}=As(),r=ne(),[t,i]=d.useState(null),[a,n]=d.useState(null),[o,l]=d.useState([]),[h,p]=d.useState(!0),[g,b]=d.useState(!1),[x,_]=d.useState("");d.useEffect(()=>{(async()=>{try{const{data:{user:C}}=await f.auth.getUser();if(n(C),e){const{data:j,error:w}=await f.from("users").select("id, username, display_name, profile_image_url").eq("username",e).single();w||!j?_("Channel not found."):i(j)}else{const{data:j,error:w}=await f.from("users").select("id, username, display_name, profile_image_url").neq("id",(C==null?void 0:C.id)||"none").limit(20);!w&&j&&l(j)}}catch(C){console.error("Error fetching data:",C),_("Error loading channel information.")}finally{p(!1)}})()},[e]);const P=async()=>{if(!a){_("Please sign in to become a channel friend.");return}if(a.id===(t==null?void 0:t.id)){_("You cannot subscribe to your own channel as a friend.");return}b(!0),_("");try{const{error:M}=await f.from("channel_friends").insert([{channel_owner_id:t.id,friend_id:a.id,status:"pending"}]);M?(console.error("Error creating friend request:",M),_("Failed to send friend request. Please try again.")):(_("Friend request sent! Waiting for channel owner approval."),setTimeout(()=>{r("/dashboard")},3e3))}catch(M){console.error("Error in friend request:",M),_("An error occurred. Please try again.")}finally{b(!1)}};return h?s.jsx("div",{className:"channel-friend-page",children:s.jsx("div",{className:"loading-container",children:s.jsx("h2",{children:"Loading channel information..."})})}):e?t?s.jsx("div",{className:"channel-friend-page",children:s.jsxs("div",{className:"channel-friend-container",children:[s.jsxs("div",{className:"channel-header-simple",children:[s.jsx("img",{src:t.profile_image_url||"/default-avatar.jpg",alt:t.display_name,className:"channel-logo"}),s.jsxs("div",{className:"channel-info",children:[s.jsx("h1",{children:t.display_name||t.username}),s.jsxs("p",{className:"channel-username",children:["@",t.username]})]})]}),s.jsxs("div",{className:"friend-agreement",children:[s.jsx("h2",{children:"🤝 Become a Channel Friend"}),s.jsxs("p",{className:"agreement-intro",children:["Join ",s.jsx("strong",{children:t.display_name}),"'s content creation network as a Channel Friend. Create content under their brand while earning revenue from your uploads."]}),s.jsxs("div",{className:"revenue-split-section",children:[s.jsx("h3",{children:"💰 Revenue Sharing Agreement"}),s.jsxs("div",{className:"revenue-breakdown",children:[s.jsxs("div",{className:"revenue-item friend",children:[s.jsx("div",{className:"percentage",children:"60%"}),s.jsxs("div",{className:"description",children:[s.jsx("strong",{children:"You (Channel Friend)"}),s.jsx("p",{children:"Majority share of revenue from your content"})]})]}),s.jsxs("div",{className:"revenue-item owner",children:[s.jsx("div",{className:"percentage",children:"20%"}),s.jsxs("div",{className:"description",children:[s.jsx("strong",{children:"Channel Owner"}),s.jsx("p",{children:"Revenue share for hosting and brand support"})]})]}),s.jsxs("div",{className:"revenue-item platform",children:[s.jsx("div",{className:"percentage",children:"20%"}),s.jsxs("div",{className:"description",children:[s.jsx("strong",{children:"ScreenMerch Platform"}),s.jsx("p",{children:"Platform maintenance and infrastructure costs"})]})]})]})]}),s.jsxs("div",{className:"limitations-section",children:[s.jsx("h3",{children:"📹 Content Guidelines & Limits"}),s.jsxs("div",{className:"limitation-grid",children:[s.jsxs("div",{className:"limitation-item",children:[s.jsx("div",{className:"icon",children:"📊"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Video Upload Limit"}),s.jsx("p",{children:"Maximum 5 videos per month as a Channel Friend"})]})]}),s.jsxs("div",{className:"limitation-item",children:[s.jsx("div",{className:"icon",children:"🎨"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Brand Guidelines"}),s.jsx("p",{children:"Content must align with channel owner's brand and standards"})]})]}),s.jsxs("div",{className:"limitation-item",children:[s.jsx("div",{className:"icon",children:"✅"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Content Approval"}),s.jsx("p",{children:"All uploads subject to channel owner review and approval"})]})]}),s.jsxs("div",{className:"limitation-item",children:[s.jsx("div",{className:"icon",children:"📋"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Attribution"}),s.jsx("p",{children:"Content published under channel owner's brand and name"})]})]})]})]}),s.jsxs("div",{className:"benefits-section",children:[s.jsx("h3",{children:"🌟 Channel Friend Benefits"}),s.jsxs("ul",{className:"benefits-list",children:[s.jsx("li",{children:"✅ Access to established audience and subscriber base"}),s.jsx("li",{children:"✅ Professional brand association and credibility"}),s.jsx("li",{children:"✅ Revenue sharing without upfront investment"}),s.jsx("li",{children:"✅ Mentorship and guidance from experienced content creator"}),s.jsx("li",{children:"✅ Collaborative content creation opportunities"}),s.jsx("li",{children:"✅ Analytics and performance insights"})]})]}),s.jsxs("div",{className:"terms-section",children:[s.jsx("h3",{children:"📄 Terms & Conditions"}),s.jsxs("div",{className:"terms-content",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Agreement Duration:"})," This friendship agreement continues until terminated by either party with 30-day notice."]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Content Ownership:"})," While revenue is shared, content intellectual property belongs to the channel owner."]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Performance Standards:"})," Maintain quality standards and upload consistency as agreed with channel owner."]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Termination:"})," Either party may terminate this agreement for violations of community guidelines or poor performance."]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Payment:"})," Revenue payments processed monthly via ScreenMerch's payment system."]})]})]}),s.jsxs("div",{className:"action-section",children:[x&&s.jsx("div",{className:`message ${x.includes("sent")?"success":"error"}`,children:x}),a?s.jsx("button",{onClick:P,disabled:g,className:"subscribe-friend-btn",children:g?"Sending Request...":`🤝 Request to Join ${t.display_name}'s Network`}):s.jsxs("div",{className:"auth-required",children:[s.jsx("p",{children:"Please sign in to become a Channel Friend"}),s.jsx("button",{onClick:()=>r("/"),className:"sign-in-redirect-btn",children:"Sign In"})]}),s.jsx("button",{onClick:()=>r(-1),className:"back-btn secondary",children:"Back"})]})]})]})}):s.jsx("div",{className:"channel-friend-page",children:s.jsxs("div",{className:"error-container",children:[s.jsx("h2",{children:"Channel Not Found"}),s.jsx("p",{children:"The channel you're looking for doesn't exist."}),s.jsx("button",{onClick:()=>r("/"),className:"back-btn",children:"Back to Home"})]})}):s.jsx("div",{className:"channel-friend-page",children:s.jsxs("div",{className:"channel-friend-container",children:[s.jsx("div",{className:"channel-header-simple",children:s.jsxs("div",{className:"channel-info",children:[s.jsx("h1",{children:"🤝 Become a Channel Friend"}),s.jsx("p",{className:"channel-username",children:"Choose a channel to collaborate with"})]})}),s.jsxs("div",{className:"friend-agreement",children:[s.jsx("h2",{children:"Available Channels"}),s.jsx("p",{className:"agreement-intro",children:"Select a channel below to learn about their Channel Friend program and request to join their content creation network."}),o.length>0?s.jsx("div",{className:"channels-grid",children:o.map(M=>s.jsxs("div",{className:"channel-card",onClick:()=>r(`/channel-friend/${M.username}`),children:[s.jsx("img",{src:M.profile_image_url||"/default-avatar.jpg",alt:M.display_name,className:"channel-card-avatar"}),s.jsxs("div",{className:"channel-card-info",children:[s.jsx("h3",{children:M.display_name||M.username}),s.jsxs("p",{children:["@",M.username]}),s.jsx("button",{className:"view-channel-btn",children:"View Channel Friend Program"})]})]},M.id))}):s.jsx("div",{className:"no-channels",children:s.jsx("p",{children:"No channels available at the moment."})}),s.jsx("div",{className:"action-section",children:s.jsx("button",{onClick:()=>r("/"),className:"back-btn secondary",children:"Back to Home"})})]})]})})};class ue{static async isAdmin(){try{const{data:{user:r}}=await f.auth.getUser();if(!r)return!1;const{data:t,error:i}=await f.from("users").select("is_admin").eq("id",r.id).single();return i?(console.error("Error checking admin status:",i),!1):(t==null?void 0:t.is_admin)||!1}catch(r){return console.error("Error in isAdmin:",r),!1}}static async getDashboardStats(){try{const{data:r,error:t}=await f.from("admin_dashboard_stats").select("*").single();if(t)throw t;return r}catch(r){return console.error("Error fetching dashboard stats:",r),{total_users:0,active_users:0,suspended_users:0,total_videos:0,pending_videos:0,approved_videos:0,total_subscriptions:0,active_subscriptions:0,premium_subscriptions:0,creator_network_subscriptions:0}}}static async getUsers(r=0,t=20,i="",a="all"){try{let n=f.from("users").select("*",{count:"exact"});i&&(n=n.or(`display_name.ilike.%${i}%,email.ilike.%${i}%`)),a!=="all"&&(n=n.eq("status",a));const{data:o,error:l,count:h}=await n.order("created_at",{ascending:!1}).range(r*t,(r+1)*t-1);if(l)throw l;return{users:o||[],total:h||0,page:r,limit:t,totalPages:Math.ceil((h||0)/t)}}catch(n){return console.error("Error fetching users:",n),{users:[],total:0,page:r,limit:t,totalPages:0}}}static async getVideos(r=0,t=20,i="",a="all"){try{let n=f.from("videos2").select("*, users(display_name, email)",{count:"exact"});i&&(n=n.or(`title.ilike.%${i}%,description.ilike.%${i}%`)),a!=="all"&&(n=n.eq("verification_status",a));const{data:o,error:l,count:h}=await n.order("created_at",{ascending:!1}).range(r*t,(r+1)*t-1);if(l)throw l;return{videos:o||[],total:h||0,page:r,limit:t,totalPages:Math.ceil((h||0)/t)}}catch(n){return console.error("Error fetching videos:",n),{videos:[],total:0,page:r,limit:t,totalPages:0}}}static async getSubscriptions(){try{const{data:r,error:t}=await f.from("user_subscriptions").select("*, users(display_name, email)").order("created_at",{ascending:!1});if(t)throw t;return r||[]}catch(r){return console.error("Error fetching subscriptions:",r),[]}}static async updateUserStatus(r,t){try{const{data:{user:i}}=await f.auth.getUser();if(!i)return{success:!1,error:"Not authenticated"};const{data:a,error:n}=await f.from("users").update({status:t}).eq("id",r).select().single();if(n)throw n;return await this.logAdminAction("update_user_status","user",r,{new_status:t,target_user_id:r}),{success:!0,data:a}}catch(i){return console.error("Error updating user status:",i),{success:!1,error:i.message}}}static async deleteUser(r){try{const t=await fetch(`http://localhost:3002/api/users/${r}/delete-account`,{method:"DELETE",headers:{"Content-Type":"application/json"}});return t.ok?(await this.logAdminAction("delete_user","user",r,{target_user_id:r}),{success:!0}):{success:!1,error:(await t.json()).error||"Failed to delete user"}}catch(t){return console.error("Error deleting user:",t),{success:!1,error:t.message}}}static async updateVideoStatus(r,t){try{const{data:i,error:a}=await f.from("videos2").update({verification_status:t}).eq("id",r).select().single();if(a)throw a;return await this.logAdminAction("update_video_status","video",r,{new_status:t,target_video_id:r}),{success:!0,data:i}}catch(i){return console.error("Error updating video status:",i),{success:!1,error:i.message}}}static async deleteVideo(r){try{const{error:t}=await f.from("videos2").delete().eq("id",r);if(t)throw t;return await this.logAdminAction("delete_video","video",r,{target_video_id:r}),{success:!0}}catch(t){return console.error("Error deleting video:",t),{success:!1,error:t.message}}}static async getAdminSettings(){try{const{data:r,error:t}=await f.from("admin_settings").select("*").order("setting_key");if(t)throw t;const i={};return r.forEach(a=>{i[a.setting_key]=a.setting_value}),i}catch(r){return console.error("Error fetching admin settings:",r),{}}}static async updateAdminSetting(r,t){try{const{data:{user:i}}=await f.auth.getUser();if(!i)return{success:!1,error:"Not authenticated"};const{data:a,error:n}=await f.rpc("update_admin_setting",{p_setting_key:r,p_setting_value:t,p_admin_user_id:i.id});if(n)throw n;return{success:!0,data:a}}catch(i){return console.error("Error updating admin setting:",i),{success:!1,error:i.message}}}static async getAdminLogs(r=0,t=50){try{const{data:i,error:a,count:n}=await f.from("admin_logs").select("*, admin_user:users(display_name, email)",{count:"exact"}).order("created_at",{ascending:!1}).range(r*t,(r+1)*t-1);if(a)throw a;return{logs:i||[],total:n||0,page:r,limit:t,totalPages:Math.ceil((n||0)/t)}}catch(i){return console.error("Error fetching admin logs:",i),{logs:[],total:0,page:r,limit:t,totalPages:0}}}static async logAdminAction(r,t,i=null,a=null){try{const{data:{user:n}}=await f.auth.getUser();if(!n)return;await f.rpc("log_admin_action",{p_admin_user_id:n.id,p_action_type:r,p_target_type:t,p_target_id:i,p_details:a})}catch(n){console.error("Error logging admin action:",n)}}static async getRecentActivity(r=10){try{const{data:t,error:i}=await f.from("admin_logs").select("*, admin_user:users(display_name, email)").order("created_at",{ascending:!1}).limit(r);if(i)throw i;return t||[]}catch(t){return console.error("Error fetching recent activity:",t),[]}}}const xl=()=>{var de;const[e,r]=d.useState(null),[t,i]=d.useState(!0),[a,n]=d.useState(!1),[o,l]=d.useState("dashboard"),[h,p]=d.useState([]),[g,b]=d.useState([]),[x,_]=d.useState([]),[P,M]=d.useState({}),[C,j]=d.useState(""),[w,c]=d.useState("all"),N=ne();d.useEffect(()=>{F()},[]);const F=async()=>{try{const{data:{user:u}}=await f.auth.getUser();if(!u){N("/");return}if(r(u),!await ue.isAdmin()){alert("Access denied. Admin privileges required."),N("/");return}n(!0),D()}catch(u){console.error("Error checking admin status:",u),N("/")}finally{i(!1)}},D=async()=>{await Promise.all([R(),W(),ce(),V()])},R=async()=>{try{const u=await ue.getUsers(0,100,C,w);p(u.users)}catch(u){console.error("Error loading users:",u)}},W=async()=>{try{const u=await ue.getVideos(0,100,C,w);b(u.videos)}catch(u){console.error("Error loading videos:",u)}},ce=async()=>{try{const u=await ue.getSubscriptions();_(u)}catch(u){console.error("Error loading subscriptions:",u)}},V=async()=>{try{const u=await ue.getDashboardStats();M({totalUsers:u.total_users||0,totalVideos:u.total_videos||0,totalSubscriptions:u.total_subscriptions||0,pendingVideos:u.pending_videos||0,activeUsers:u.active_users||0,suspendedUsers:u.suspended_users||0})}catch(u){console.error("Error loading stats:",u)}},B=async(u,E)=>{if(confirm(`Are you sure you want to ${E} this user?`))try{let I;E==="delete"?I=await ue.deleteUser(u):E==="suspend"?I=await ue.updateUserStatus(u,"suspended"):E==="activate"&&(I=await ue.updateUserStatus(u,"active")),I.success?(alert(`User ${E}d successfully`),R()):alert(`Failed to ${E} user: ${I.error}`)}catch(I){console.error(`Error ${E}ing user:`,I),alert(`Failed to ${E} user`)}},z=async(u,E)=>{if(confirm(`Are you sure you want to ${E} this video?`))try{let I;E==="delete"?I=await ue.deleteVideo(u):E==="approve"?I=await ue.updateVideoStatus(u,"approved"):E==="reject"&&(I=await ue.updateVideoStatus(u,"rejected")),I.success?(alert(`Video ${E}d successfully`),W()):alert(`Failed to ${E} video: ${I.error}`)}catch(I){console.error(`Error ${E}ing video:`,I),alert(`Failed to ${E} video`)}},te=h.filter(u=>{var K,Pe;const E=((K=u.display_name)==null?void 0:K.toLowerCase().includes(C.toLowerCase()))||((Pe=u.email)==null?void 0:Pe.toLowerCase().includes(C.toLowerCase())),I=w==="all"||u.status===w;return E&&I}),ge=g.filter(u=>{var K,Pe;const E=((K=u.title)==null?void 0:K.toLowerCase().includes(C.toLowerCase()))||((Pe=u.description)==null?void 0:Pe.toLowerCase().includes(C.toLowerCase())),I=w==="all"||u.verification_status===w;return E&&I});return t?s.jsxs("div",{className:"admin-loading",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Loading admin panel..."})]}):a?s.jsxs("div",{className:"admin-container",children:[s.jsxs("div",{className:"admin-header",children:[s.jsx("h1",{children:"Admin Portal"}),s.jsxs("div",{className:"admin-user-info",children:[s.jsxs("span",{children:["Welcome, ",((de=e==null?void 0:e.user_metadata)==null?void 0:de.name)||(e==null?void 0:e.email)]}),s.jsx("button",{onClick:()=>N("/"),className:"admin-logout-btn",children:"Back to Site"})]})]}),s.jsxs("div",{className:"admin-content",children:[s.jsxs("div",{className:"admin-sidebar",children:[s.jsx("button",{className:`admin-tab ${o==="dashboard"?"active":""}`,onClick:()=>l("dashboard"),children:"Dashboard"}),s.jsx("button",{className:`admin-tab ${o==="users"?"active":""}`,onClick:()=>l("users"),children:"User Management"}),s.jsx("button",{className:`admin-tab ${o==="videos"?"active":""}`,onClick:()=>l("videos"),children:"Content Moderation"}),s.jsx("button",{className:`admin-tab ${o==="subscriptions"?"active":""}`,onClick:()=>l("subscriptions"),children:"Subscriptions"}),s.jsx("button",{className:`admin-tab ${o==="settings"?"active":""}`,onClick:()=>l("settings"),children:"System Settings"})]}),s.jsxs("div",{className:"admin-main",children:[o==="dashboard"&&s.jsxs("div",{className:"admin-dashboard",children:[s.jsxs("div",{className:"stats-grid",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("h3",{children:"Total Users"}),s.jsx("p",{className:"stat-number",children:P.totalUsers})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("h3",{children:"Active Users"}),s.jsx("p",{className:"stat-number",children:P.activeUsers})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("h3",{children:"Suspended Users"}),s.jsx("p",{className:"stat-number",children:P.suspendedUsers})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("h3",{children:"Total Videos"}),s.jsx("p",{className:"stat-number",children:P.totalVideos})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("h3",{children:"Pending Approvals"}),s.jsx("p",{className:"stat-number",children:P.pendingVideos})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("h3",{children:"Active Subscriptions"}),s.jsx("p",{className:"stat-number",children:P.totalSubscriptions})]})]}),s.jsxs("div",{className:"recent-activity",children:[s.jsx("h3",{children:"Recent Activity"}),s.jsx("div",{className:"activity-list",children:h.slice(0,5).map(u=>s.jsxs("div",{className:"activity-item",children:[s.jsxs("span",{children:["New user: ",u.display_name||u.email]}),s.jsx("span",{children:new Date(u.created_at).toLocaleDateString()})]},u.id))})]})]}),o==="users"&&s.jsxs("div",{className:"admin-users",children:[s.jsxs("div",{className:"admin-filters",children:[s.jsx("input",{type:"text",placeholder:"Search users...",value:C,onChange:u=>j(u.target.value),className:"admin-search"}),s.jsxs("select",{value:w,onChange:u=>c(u.target.value),className:"admin-filter",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"suspended",children:"Suspended"})]})]}),s.jsx("div",{className:"users-table",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"User"}),s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Joined"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:te.map(u=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"user-info",children:[s.jsx("img",{src:u.profile_image_url||"/default-avatar.jpg",alt:u.display_name,className:"user-avatar"}),s.jsx("span",{children:u.display_name||"No name"})]})}),s.jsx("td",{children:u.email}),s.jsx("td",{children:new Date(u.created_at).toLocaleDateString()}),s.jsx("td",{children:s.jsx("span",{className:`status-badge ${u.status||"active"}`,children:u.status||"active"})}),s.jsx("td",{children:s.jsxs("div",{className:"action-buttons",children:[s.jsx("button",{onClick:()=>B(u.id,"suspend"),className:"action-btn suspend",disabled:u.status==="suspended",children:"Suspend"}),s.jsx("button",{onClick:()=>B(u.id,"activate"),className:"action-btn activate",disabled:u.status==="active",children:"Activate"}),s.jsx("button",{onClick:()=>B(u.id,"delete"),className:"action-btn delete",children:"Delete"})]})})]},u.id))})]})})]}),o==="videos"&&s.jsxs("div",{className:"admin-videos",children:[s.jsxs("div",{className:"admin-filters",children:[s.jsx("input",{type:"text",placeholder:"Search videos...",value:C,onChange:u=>j(u.target.value),className:"admin-search"}),s.jsxs("select",{value:w,onChange:u=>c(u.target.value),className:"admin-filter",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"approved",children:"Approved"}),s.jsx("option",{value:"rejected",children:"Rejected"})]})]}),s.jsx("div",{className:"videos-table",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Video"}),s.jsx("th",{children:"Creator"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Uploaded"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:ge.map(u=>{var E,I,K;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"video-info",children:[s.jsx("img",{src:u.thumbnail||"/default-thumbnail.jpg",alt:u.title,className:"video-thumbnail"}),s.jsxs("div",{children:[s.jsx("h4",{children:u.title}),s.jsxs("p",{children:[(E=u.description)==null?void 0:E.substring(0,100),"..."]})]})]})}),s.jsx("td",{children:((I=u.users)==null?void 0:I.display_name)||((K=u.users)==null?void 0:K.email)}),s.jsx("td",{children:s.jsx("span",{className:`status-badge ${u.verification_status}`,children:u.verification_status})}),s.jsx("td",{children:new Date(u.created_at).toLocaleDateString()}),s.jsx("td",{children:s.jsxs("div",{className:"action-buttons",children:[s.jsx("button",{onClick:()=>z(u.id,"approve"),className:"action-btn approve",disabled:u.verification_status==="approved",children:"Approve"}),s.jsx("button",{onClick:()=>z(u.id,"reject"),className:"action-btn reject",disabled:u.verification_status==="rejected",children:"Reject"}),s.jsx("button",{onClick:()=>z(u.id,"delete"),className:"action-btn delete",children:"Delete"})]})})]},u.id)})})]})})]}),o==="subscriptions"&&s.jsxs("div",{className:"admin-subscriptions",children:[s.jsx("h3",{children:"Subscription Management"}),s.jsx("div",{className:"subscriptions-table",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"User"}),s.jsx("th",{children:"Tier"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Start Date"}),s.jsx("th",{children:"End Date"})]})}),s.jsx("tbody",{children:x.map(u=>{var E,I;return s.jsxs("tr",{children:[s.jsx("td",{children:((E=u.users)==null?void 0:E.display_name)||((I=u.users)==null?void 0:I.email)}),s.jsx("td",{children:s.jsx("span",{className:`tier-badge ${u.tier}`,children:u.tier})}),s.jsx("td",{children:s.jsx("span",{className:`status-badge ${u.status}`,children:u.status})}),s.jsx("td",{children:new Date(u.current_period_start).toLocaleDateString()}),s.jsx("td",{children:new Date(u.current_period_end).toLocaleDateString()})]},u.id)})})]})})]}),o==="settings"&&s.jsxs("div",{className:"admin-settings",children:[s.jsx("h3",{children:"System Settings"}),s.jsxs("div",{className:"settings-section",children:[s.jsx("h4",{children:"Admin Configuration"}),s.jsx("p",{children:"Configure admin emails and system settings here."}),s.jsxs("div",{className:"setting-item",children:[s.jsx("label",{children:"Admin Emails (comma-separated):"}),s.jsx("input",{type:"text",placeholder:"admin@example.com, admin2@example.com",className:"setting-input"})]}),s.jsx("button",{className:"save-settings-btn",children:"Save Settings"})]})]})]})]})]}):null},vl=()=>{const[e,r]=d.useState(""),[t,i]=d.useState(""),[a,n]=d.useState(!0),[o,l]=d.useState(""),h=ne(),p=async g=>{if(g.preventDefault(),l(""),a){const{error:b}=await f.auth.signInWithPassword({email:e,password:t});b?l(b.message):(l("Logged in! Redirecting..."),setTimeout(()=>{h("/")},1e3))}else{const{error:b}=await f.auth.signUp({email:e,password:t});l(b?b.message:"Signup successful! Check your email for a confirmation link.")}};return s.jsxs("div",{style:{maxWidth:400,margin:"2rem auto",padding:20,border:"1px solid #ccc",borderRadius:8},children:[s.jsx("h2",{children:a?"Login":"Sign Up"}),s.jsxs("form",{onSubmit:p,children:[s.jsx("input",{type:"email",placeholder:"Email",value:e,required:!0,onChange:g=>r(g.target.value),style:{width:"100%",marginBottom:10,padding:8}}),s.jsx("input",{type:"password",placeholder:"Password",value:t,required:!0,onChange:g=>i(g.target.value),style:{width:"100%",marginBottom:10,padding:8}}),s.jsx("button",{type:"submit",style:{width:"100%",padding:10},children:a?"Login":"Sign Up"})]}),s.jsx("button",{onClick:()=>{n(!a),l("")},style:{marginTop:10,width:"100%",background:"none",border:"none",color:"#007bff",cursor:"pointer"},children:a?"Don't have an account? Sign Up":"Already have an account? Login"}),o&&s.jsx("div",{style:{marginTop:15,color:"red"},children:o})]})},yl=()=>s.jsx("div",{className:"privacy-policy-container",children:s.jsxs("div",{className:"privacy-policy-content",children:[s.jsx("div",{className:"logo",children:s.jsx("img",{src:Xs,alt:"ScreenMerch Logo",className:"logo-img"})}),s.jsx("h1",{children:"Privacy Policy"}),s.jsx("div",{className:"last-updated",children:"Last Updated: January 2025"}),s.jsxs("section",{children:[s.jsx("h2",{children:"Company Information"}),s.jsxs("p",{children:[s.jsx("strong",{children:"ScreenMerch"})," is committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, protect, and handle your information when you use our custom merchandise platform and services."]}),s.jsxs("div",{className:"highlight-box",children:[s.jsx("strong",{children:"Contact Information:"}),s.jsx("br",{}),"Company: ScreenMerch",s.jsx("br",{}),"Website: screenmerch.com",s.jsx("br",{}),"Email: support@screenmerch.com",s.jsx("br",{}),"Privacy Officer: support@screenmerch.com"]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"Information We Collect"}),s.jsx("h3",{children:"Personal Information"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Account Information:"})," Name, email address, username, password (encrypted)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Contact Details:"})," Phone number (for order notifications), mailing address"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Billing Information:"})," Shipping and billing addresses, payment method details (processed securely through Stripe)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Profile Data:"})," Profile pictures, preferences, customization settings"]})]}),s.jsx("h3",{children:"Content and Usage Information"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Video Content:"})," Video files, screenshots, thumbnails, and images you upload"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Custom Designs:"})," Product customizations, text overlays, design modifications"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Order History:"})," Products ordered, preferences, purchase patterns"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Platform Usage:"})," Navigation patterns, feature usage, time spent on platform"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Technical Data:"})," IP address, browser type, device information, operating system"]})]})]}),s.jsxs("section",{className:"security-box",children:[s.jsx("h2",{children:"Content Processing and Protection"}),s.jsx("h3",{children:"Video Content Handling"}),s.jsx("p",{children:s.jsx("strong",{children:"How We Process Your Content:"})}),s.jsxs("ul",{children:[s.jsx("li",{children:"Video content is processed through secure, encrypted servers"}),s.jsx("li",{children:"We extract screenshots and thumbnails for merchandise creation"}),s.jsx("li",{children:"All processing occurs within our protected infrastructure"}),s.jsx("li",{children:"Content is never shared with unauthorized third parties"}),s.jsx("li",{children:"We maintain strict access controls for all uploaded content"})]}),s.jsx("h3",{children:"Content Rights and Usage"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Your Content Ownership:"})," You retain ownership of your original content"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Platform License:"})," You grant us limited rights to process content for merchandise creation"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Exclusivity Protection:"})," We ensure your processed content remains exclusive to ScreenMerch"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"No Unauthorized Sharing:"})," Your content is never provided to competing platforms"]})]}),s.jsx("h3",{children:"Data Retention"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Active account content: Retained while account is active"}),s.jsx("li",{children:"Order-related content: Retained for 7 years for legal/tax purposes"}),s.jsx("li",{children:"Backup content: Securely destroyed after 90 days in backups"}),s.jsx("li",{children:"Deleted account content: Permanently removed within 30 days"})]})]}),s.jsxs("section",{className:"sms-section",children:[s.jsx("h2",{children:"SMS Messaging and Communications"}),s.jsx("h3",{children:"SMS Consent and Usage"}),s.jsx("p",{children:"By providing your phone number and checking the SMS consent box during checkout, you explicitly consent to receive SMS text messages from ScreenMerch for the following purposes:"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Order Notifications:"})," Updates about your order status, processing, and shipping"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Customer Service:"})," Support communications and order assistance"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Account Security:"})," Two-factor authentication and security alerts"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Important Updates:"})," Critical account or service notifications"]})]}),s.jsxs("div",{className:"highlight-box",children:[s.jsx("strong",{children:"Program Name:"})," ScreenMerch Notifications",s.jsx("br",{}),s.jsx("strong",{children:"Provider:"})," ScreenMerch",s.jsx("br",{}),s.jsx("strong",{children:"Purpose:"})," Order notifications and customer service communications",s.jsx("br",{}),s.jsx("strong",{children:"Frequency:"})," 1-3 messages per order, occasional service messages",s.jsx("br",{}),s.jsx("strong",{children:"Opt-Out:"})," Reply STOP to any SMS to unsubscribe immediately",s.jsx("br",{}),s.jsx("strong",{children:"Help:"})," Reply HELP to any SMS for assistance or contact support@screenmerch.com",s.jsx("br",{}),s.jsx("strong",{children:"Cost:"})," Message and data rates may apply based on your mobile carrier plan"]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"How We Use Your Information"}),s.jsx("h3",{children:"Primary Uses"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Service Delivery:"})," Process and fulfill your custom merchandise orders"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Content Processing:"})," Transform your video content into printable merchandise designs"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Communication:"})," Send order notifications via SMS and email (with consent)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Customer Support:"})," Provide assistance and resolve issues"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Platform Improvement:"})," Enhance our services and user experience"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Security:"})," Protect against fraud and unauthorized access"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Legal Compliance:"})," Meet regulatory and legal obligations"]})]}),s.jsx("h3",{children:"Platform Exclusivity Protection"}),s.jsxs("ul",{children:[s.jsx("li",{children:"We ensure your content remains exclusive to ScreenMerch platform"}),s.jsx("li",{children:"We monitor and prevent unauthorized use of your processed content"}),s.jsx("li",{children:"We maintain audit trails for content usage and access"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"Data Security and Protection"}),s.jsx("h3",{children:"Technical Safeguards"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Encryption:"})," End-to-end encryption for data transmission and storage"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Access Controls:"})," Multi-factor authentication and role-based access"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Monitoring:"})," 24/7 security monitoring and intrusion detection"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Backups:"})," Secure, encrypted backups with restricted access"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Infrastructure:"})," SOC 2 compliant cloud infrastructure"]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"Your Privacy Rights"}),s.jsx("p",{children:"You have the right to:"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Access:"})," Request a copy of your personal information"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Correction:"})," Update or correct inaccurate information"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Deletion:"})," Request deletion of your information (subject to legal requirements)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Portability:"})," Receive your data in a structured, machine-readable format"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Opt-Out:"})," Withdraw consent for SMS communications"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Restriction:"})," Request limitations on how we process your data"]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"Contact Us"}),s.jsx("p",{children:"For privacy-related questions, concerns, or requests, please contact us:"}),s.jsxs("div",{className:"highlight-box",children:[s.jsx("strong",{children:"Privacy Officer:"})," support@screenmerch.com",s.jsx("br",{}),s.jsx("strong",{children:"General Support:"})," support@screenmerch.com",s.jsx("br",{}),s.jsx("strong",{children:"Website:"})," screenmerch.com",s.jsx("br",{}),s.jsx("strong",{children:"SMS Opt-Out:"})," Reply STOP to any message",s.jsx("br",{}),s.jsx("strong",{children:"Data Requests:"})," support@screenmerch.com"]})]}),s.jsxs("div",{className:"navigation-links",children:[s.jsx(Z,{to:"/",className:"nav-link",children:"← Back to ScreenMerch"})," |",s.jsx(Z,{to:"/terms-of-service",className:"nav-link",children:"Terms of Service →"})]})]})}),jl=()=>s.jsx("div",{className:"terms-container",children:s.jsxs("div",{className:"terms-content",children:[s.jsx("div",{className:"logo",children:s.jsx("img",{src:Xs,alt:"ScreenMerch Logo",className:"logo-img"})}),s.jsx("h1",{children:"Terms of Service"}),s.jsx("div",{className:"last-updated",children:"Last Updated: January 2025"}),s.jsxs("section",{children:[s.jsx("h2",{children:"1. Acceptance of Terms"}),s.jsx("p",{children:'By accessing and using ScreenMerch ("the Service"), you accept and agree to be bound by the terms and provision of this agreement. These Terms of Service ("Terms") govern your use of the ScreenMerch website and services. If you do not agree to these terms, you must not use the Service.'})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"2. Description of Service"}),s.jsx("p",{children:"ScreenMerch is a platform that allows users to create custom merchandise from video content, including screenshots and thumbnails. We facilitate the creation and ordering of custom products through third-party providers. Our platform is designed exclusively for creating merchandise through ScreenMerch services."})]}),s.jsxs("section",{className:"critical-box",children:[s.jsx("h2",{children:"3. CRITICAL: Intellectual Property Protection & Platform Exclusivity"}),s.jsx("h3",{children:"3.1 Reverse Engineering Prohibition"}),s.jsx("p",{children:s.jsx("strong",{children:"YOU EXPRESSLY AGREE AND ACKNOWLEDGE THAT:"})}),s.jsxs("ul",{children:[s.jsx("li",{children:"You will NOT reverse engineer, decompile, disassemble, or attempt to derive the source code of ScreenMerch platform"}),s.jsx("li",{children:"You will NOT attempt to discover underlying algorithms, methods, or processes used by ScreenMerch"}),s.jsx("li",{children:"You will NOT use any automated tools, bots, or scrapers to extract data or functionality from ScreenMerch"}),s.jsx("li",{children:"You will NOT create competing services based on ScreenMerch's functionality or design"}),s.jsx("li",{children:"You will NOT copy, reproduce, or replicate ScreenMerch's user interface, workflows, or business processes"})]}),s.jsx("h3",{children:"3.2 Platform Exclusivity Agreement"}),s.jsx("p",{children:s.jsx("strong",{children:"EXCLUSIVE USE COMMITMENT:"})}),s.jsxs("ul",{children:[s.jsx("li",{children:s.jsx("strong",{children:"You agree that any video images, screenshots, thumbnails, or content processed through ScreenMerch may ONLY be used to create products through ScreenMerch platform"})}),s.jsx("li",{children:"You will NOT use video content processed on ScreenMerch to create merchandise on any other platform (including but not limited to Printful, Teespring, Redbubble, Etsy, Amazon Merch, etc.)"}),s.jsx("li",{children:"You will NOT download, export, or transfer video images from ScreenMerch to create products elsewhere"}),s.jsx("li",{children:"You will NOT share, distribute, or provide ScreenMerch-processed content to third parties for merchandise creation"}),s.jsx("li",{children:"Any custom designs, layouts, or modifications created through ScreenMerch remain exclusive to ScreenMerch platform"})]}),s.jsx("h3",{children:"3.3 Enforcement and Penalties"}),s.jsx("p",{children:"Violation of these exclusivity and protection terms will result in:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Immediate account termination without refund"}),s.jsx("li",{children:"Legal action for breach of contract and intellectual property infringement"}),s.jsx("li",{children:"Monetary damages including lost profits and legal fees"}),s.jsx("li",{children:"Permanent ban from all ScreenMerch services"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"4. User Accounts"}),s.jsx("h3",{children:"Account Creation"}),s.jsxs("ul",{children:[s.jsx("li",{children:"You may be required to create an account to access certain features"}),s.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account"}),s.jsx("li",{children:"You are responsible for all activities that occur under your account"}),s.jsx("li",{children:"You must provide accurate and complete information when creating an account"}),s.jsx("li",{children:"Each user may only maintain one active account"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"5. Content and Intellectual Property Rights"}),s.jsx("h3",{children:"5.1 User Content Ownership"}),s.jsxs("ul",{children:[s.jsx("li",{children:"You retain ownership of original content you upload to ScreenMerch"}),s.jsx("li",{children:"You grant ScreenMerch a limited, non-exclusive license to process your content for merchandise creation"}),s.jsx("li",{children:"You are responsible for ensuring you have rights to any content you upload"}),s.jsx("li",{children:"You must not upload copyrighted content without proper authorization"})]}),s.jsx("h3",{children:"5.2 ScreenMerch Intellectual Property"}),s.jsxs("ul",{children:[s.jsx("li",{children:"ScreenMerch platform, technology, algorithms, and processes are proprietary and protected"}),s.jsx("li",{children:"All ScreenMerch branding, logos, and design elements are owned by ScreenMerch"}),s.jsx("li",{children:"Product templates, layouts, and customization tools are ScreenMerch intellectual property"}),s.jsx("li",{children:"You may not use ScreenMerch IP for any purpose outside the intended service"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"6. Platform Usage Restrictions"}),s.jsx("h3",{children:"6.1 Prohibited Content"}),s.jsx("p",{children:"You may not upload or create products containing:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Copyrighted material without authorization"}),s.jsx("li",{children:"Illegal, harmful, threatening, or offensive content"}),s.jsx("li",{children:"Content that violates privacy or publicity rights"}),s.jsx("li",{children:"Trademarked material without permission"}),s.jsx("li",{children:"Adult or explicit content"}),s.jsx("li",{children:"Content promoting violence, hate, or discrimination"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"7. Orders and Payment"}),s.jsx("h3",{children:"7.1 Product Orders"}),s.jsxs("ul",{children:[s.jsx("li",{children:"All orders are subject to acceptance and product availability"}),s.jsx("li",{children:"Prices are displayed in USD and may change without notice"}),s.jsx("li",{children:"Payment is processed securely through Stripe"}),s.jsx("li",{children:"You agree to provide accurate billing information"}),s.jsx("li",{children:"Orders cannot be transferred to other platforms"})]}),s.jsx("h3",{children:"7.2 Refunds and Returns"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Custom merchandise is typically non-refundable due to personalized nature"}),s.jsx("li",{children:"Defective or damaged products may be eligible for replacement"}),s.jsx("li",{children:"Refund requests must be submitted within 30 days of delivery"}),s.jsx("li",{children:"No refunds for violation of exclusivity terms"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"8. Prohibited Uses"}),s.jsx("p",{children:"You may not use ScreenMerch to:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Upload illegal, harmful, or offensive content"}),s.jsx("li",{children:"Infringe on intellectual property rights"}),s.jsx("li",{children:"Engage in fraudulent or deceptive practices"}),s.jsx("li",{children:"Attempt to circumvent security measures"}),s.jsx("li",{children:"Use automated systems to access the service"}),s.jsx("li",{children:"Reverse engineer or replicate our platform"}),s.jsx("li",{children:"Export content for use on competing platforms"}),s.jsx("li",{children:"Violate platform exclusivity agreements"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"9. Termination"}),s.jsx("h3",{children:"9.1 Termination by ScreenMerch"}),s.jsxs("ul",{children:[s.jsx("li",{children:"We may terminate accounts for violation of these terms"}),s.jsx("li",{children:"Immediate termination for reverse engineering or exclusivity violations"}),s.jsx("li",{children:"We reserve the right to refuse service to anyone"})]}),s.jsx("h3",{children:"9.2 Effect of Termination"}),s.jsxs("ul",{children:[s.jsx("li",{children:"All licenses granted to you terminate immediately"}),s.jsx("li",{children:"You must cease all use of ScreenMerch services"}),s.jsx("li",{children:"Outstanding orders may be cancelled"}),s.jsx("li",{children:"Exclusivity obligations survive termination"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"10. Contact Information"}),s.jsxs("div",{className:"highlight-box",children:[s.jsx("strong",{children:"ScreenMerch Support"}),s.jsx("br",{}),"Email: support@screenmerch.com",s.jsx("br",{}),"Website: screenmerch.com",s.jsx("br",{}),"Legal Issues: support@screenmerch.com"]})]}),s.jsxs("section",{children:[s.jsx("h2",{children:"11. Entire Agreement"}),s.jsx("p",{children:"These Terms of Service, together with our Privacy Policy, constitute the entire agreement between you and ScreenMerch regarding the use of our services."})]}),s.jsxs("div",{className:"navigation-links",children:[s.jsx(Z,{to:"/",className:"nav-link",children:"← Back to ScreenMerch"})," |",s.jsx(Z,{to:"/privacy-policy",className:"nav-link",children:"← Privacy Policy"})]})]})}),bl=()=>{const[e,r]=d.useState(!0),[t,i]=d.useState(0),[a,n]=d.useState(null),[o,l]=d.useState("All"),h=()=>l("All"),p=Js();d.useEffect(()=>{(async()=>{const x=p.pathname.match(/^\/profile\/(.+)$/);if(x){const _=x[1];try{const P=await fetch(`${Ze.ENDPOINTS.USER_SUBSCRIPTION}/${_}/subscription`);if(P.ok){const M=await P.json();n(M)}else n({isThirdTier:!1})}catch(P){console.error("Error fetching subscription data:",P),n({isThirdTier:!1})}}else n(null)})()},[p.pathname]);const g=e&&!(a!=null&&a.isThirdTier);return s.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[s.jsx($t,{setSidebar:r,resetCategory:h}),s.jsxs("div",{style:{display:"flex",flex:1},children:[g&&s.jsx(pl,{sidebar:e,category:t,setCategory:i}),s.jsxs("div",{className:"main-content-area",style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{flex:1},children:s.jsxs(Ct,{children:[s.jsx(ee,{path:"/",element:s.jsx(el,{sidebar:e,category:t,selectedCategory:o,setSelectedCategory:l})}),s.jsx(ee,{path:"/video/:categoryId/:videoId",element:s.jsx(ol,{})}),s.jsx(ee,{path:"/upload",element:s.jsx(ll,{sidebar:e})}),s.jsx(ee,{path:"/profile/:username",element:s.jsx(cl,{sidebar:e})}),s.jsx(ee,{path:"/approve-subscription",element:s.jsx(dl,{})}),s.jsx(ee,{path:"/dashboard",element:s.jsx(ul,{sidebar:e})}),s.jsx(ee,{path:"/subscription-tiers",element:s.jsx(hl,{})}),s.jsx(ee,{path:"/subscription-success",element:s.jsx(ml,{})}),s.jsx(ee,{path:"/coming-soon",element:s.jsx(gl,{})}),s.jsx(ee,{path:"/channel-friend",element:s.jsx(Dr,{})}),s.jsx(ee,{path:"/channel-friend/:channelUsername",element:s.jsx(Dr,{})}),s.jsx(ee,{path:"/admin",element:s.jsx(xl,{})}),s.jsx(ee,{path:"/auth",element:s.jsx(vl,{})}),s.jsx(ee,{path:"/privacy-policy",element:s.jsx(yl,{})}),s.jsx(ee,{path:"/terms-of-service",element:s.jsx(jl,{})})]})}),s.jsx(Qt,{})]})]})]})};Vs.createRoot(document.getElementById("root")).render(s.jsx(Mt.StrictMode,{children:s.jsx(Dt,{children:s.jsx(bl,{})})}))});export default Sl();
